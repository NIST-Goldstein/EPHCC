version = 4.2


//
// Saved by sw version: 2017.4
// Save timestamp: 17-Jan-2018 @ 03:28:02 PM
//

model "diesel_unittest" {
    configuration {
        hil_device = "HIL603"
        hil_configuration_id = 1
        simulation_method = exact
        simulation_time_step = 4e-6
        simulation_discret_scaling = 1.0
        dsp_timer_periods = 100e-6, 50e-3
        ss_calc_method = "systematic elimination"
        enb_pole_shift = True
        enb_gds_oversampling = True
        show_modes = False
        cpl_stb = False
        enb_dep_sw_detect = False
        code_section = "external memory"
        data_section = "internal memory"
        sys_sp_rate_1 = 5e-05
        sys_sp_rate_2 = 0.05
        sys_real_type_precision = "default"
        user_real_type_precision = "single precision"
        sys_cpu_optimization = "medium"
        user_cpu_optimization = "medium"
    }

    
    component Subsystem Root {

        
        component src_ground gnd2 {
            
	    
        }
        [
            position = 6392, 6704
            rotation = down
            hide_name = True

        ]
        
        component sys_hil_marker "Device Marker1" {
            
            override_hw_settings = "True"
            override_sim_settings = "True"
            sim_step = "4e-6"
	    
        }
        [
            position = 5136, 7160

        ]
        
        component sys_hil_marker "Device Marker2" {
            
            hil_device_id = "1"
            hw_configuration_id = "2"
            override_hw_settings = "True"
            override_sim_settings = "True"
            sim_step = "4e-6"
	    
        }
        [
            position = 5128, 6800

        ]
        
        component sys_hil_marker "Device Marker3" {
            
            hil_device_id = "2"
            override_hw_settings = "True"
            override_sim_settings = "True"
            sim_step = "4e-6"
	    
        }
        [
            position = 5128, 6984

        ]
        
        component sys_hil_marker "Device Marker4" {
            
            hil_device_id = "3"
            override_hw_settings = "True"
            override_sim_settings = "True"
            sim_step = "4e-6"
	    
        }
        [
            position = 6168, 6880

        ]
        
        component pas_resistor R1 {
            
	    
        }
        [
            position = 5328, 6864

        ]
        
        component src_ground gnd3 {
            
	    
        }
        [
            position = 5560, 7088
            rotation = down
            hide_name = True

        ]
        
        component src_ground gnd4 {
            
	    
        }
        [
            position = 5624, 6888
            rotation = down
            hide_name = True

        ]
        
        component src_ground gnd5 {
            
	    
        }
        [
            position = 5584, 6704
            rotation = down
            hide_name = True

        ]
        
        component pas_resistor R2 {
            
	    
        }
        [
            position = 5424, 6864

        ]
        
        component pas_resistor R3 {
            
	    
        }
        [
            position = 5328, 7048

        ]
        
        component pas_resistor R4 {
            
	    
        }
        [
            position = 5424, 7048

        ]
        
        component pas_resistor R5 {
            
	    
        }
        [
            position = 5344, 7264

        ]
        
        component pas_resistor R6 {
            
	    
        }
        [
            position = 5440, 7264

        ]
        component "core/Three Phase Voltage Source" Vs1 {
            
        }
        [
            position = 6392, 6832
            rotation = right
            scale = -1, 1
            size = 62, 256

        ]
        
        component "core/Three Phase Voltage Source" Vs2 {
            
        }
        [
            position = 5376, 6792
            rotation = right
            scale = -1, 1
            size = 62, 256

        ]
        
        component "core/Three Phase Voltage Source" Vs3 {
            
        }
        [
            position = 5376, 6976
            rotation = right
            scale = -1, 1
            size = 62, 256

        ]
        
        component "core/Triple Pole Single Throw Contactor" S1 {
            
            initial_state = "on"
        }
        [
            position = 6392, 7680
            rotation = right
            size = 64, 256

        ]
        
        component "core/Three Phase Voltage Source" Vs4 {
            
        }
        [
            position = 5384, 7192
            rotation = right
            scale = -1, 1
            size = 62, 256

        ]
        
        component "core/Transmission Line" F1_line {
            
            C_imperial = "[[0.00233, 0.00140, 0.00140], [0.00140, 0.00233, 0.00140], [0.00140, 0.00140, 0.00233]]"
            C_sequence_metric = "[[5.089e-7, 0.0, 0.0], [0.0, 5.089e-7, 0.0], [0.0, 0.0, 5.089e-7]]"
            Frequency = "sys_f"
            L_sequence_imperial = "cbl_specs['L'][12]"
            L_sequence_metric = "[[0.0020, 0.0, 0.0], [0.0, 3.0953e-4, 0.0], [0.0, 0.0, 3.0953e-4]]"
            Length_metric = "1.6764"
            Length_miles = "0.0094697"
            R_sequence_imperial = "cbl_specs['R'][12]"
            R_sequence_metric = "[[1.1405, 0.0, 0.0], [0.0, 0.0749, 0.0], [0.0, 0.0, 0.0749]]"
            model_def = "Sequence"
        }
        [
            position = 6392, 7128
            rotation = left
            size = 256, 72

        ]
        
        
        component Subsystem Step_Load {
            layout = dynamic

            component "core/Triple Pole Single Throw Contactor" S2 {
                
            }
            [
                position = 8736, 7888

            ]
            
            component "core/Triple Pole Single Throw Contactor" S1 {
                
            }
            [
                position = 8744, 8224

            ]
            
            component "core/Triple Pole Single Throw Contactor" S3 {
                
            }
            [
                position = 8728, 7568

            ]
            
            
            component Subsystem "Load3_25%" {
                layout = dynamic

                
                component pas_inductor Lb {
                    
                    inductance = "(V**2/S*np.sqrt(1-pf**2)) / (2.0*np.pi*f)"
        	    
                }
                [
                    position = 8232, 8192

                ]
                
                component pas_inductor La {
                    
                    inductance = "(V**2/S*np.sqrt(1-pf**2)) / (2.0*np.pi*f)"
        	    
                }
                [
                    position = 8232, 8136

                ]
                
                component pas_inductor Lc {
                    
                    inductance = "(V**2/S*np.sqrt(1-pf**2)) / (2.0*np.pi*f)"
        	    
                }
                [
                    position = 8232, 8248

                ]
                
                component pas_resistor Rb {
                    
                    resistance = "V**2/S*pf"
        	    
                }
                [
                    position = 8136, 8192

                ]
                
                component pas_resistor Ra {
                    
                    resistance = "V**2/S*pf"
        	    
                }
                [
                    position = 8136, 8136

                ]
                
                component pas_resistor Rc {
                    
                    resistance = "V**2/S*pf"
        	    
                }
                [
                    position = 8136, 8248

                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port A {
                    label = "A"
                    
                    position = left:1
                    kind = pe
                }
                [
                    position = 8056, 8136

                ]
                
                port B {
                    label = "B"
                    
                    position = left:2
                    kind = pe
                }
                [
                    position = 8056, 8192

                ]
                
                port C {
                    label = "C"
                    
                    position = left:3
                    kind = pe
                }
                [
                    position = 8056, 8248

                ]
                
                comment Comment1 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Copyright (c) 2016 Massachusetts Institute of Technology</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Permission is hereby granted, free of charge, to any person obtaining a copy of this </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">software and associated documentation files (the &quot;Software&quot;), to deal in the Software</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">without restriction, including without limitation the rights to use, copy, modify, </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">merge, publish, distribute, sublicense, and/or sell copies of the Software, and to </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">permit persons to whom the Software is furnished to do so, subject to the following </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">conditions:</p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">The above copyright notice and this permission notice shall be included in </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">all copies or substantial portions of the Software.</p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p></body></html> ENDCOMMENT 
                [
                    position = 7888, 7768

                ]
                
                junction Junction1 pe
                [
                    position = 8288, 8192

                ]
                connect La.n_node Junction1 as Connection16
                
                connect Lb.n_node Junction1 as Connection18
                
                connect Lb.p_node Rb.n_node as Connection13
                
                connect Lc.n_node Junction1 as Connection30
                [
                            breakpoints =8288, 8192

                ]
                connect Ra.p_node A as Connection8
                
                connect Ra.n_node La.p_node as Connection12
                
                connect Rb.p_node B as Connection1
                
                connect Rc.p_node C as Connection10
                
                connect Rc.n_node Lc.p_node as Connection14
                
                
                S = "1000e3"
                V = "13800"
                pf = "pf"

                
                /*
                    Masks
                */
                mask {
                    icon = "image(\'component_figures/load_fig.jpg\')"
                    
                    description = "Three-phase series RL load. R and L values are calculated using input parameters:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    - V: Rated rms line-to-line voltage
                                                                                                                                                                                                                                                                                                                                                                                                                                        - S: Rated three-phase power
                                                                                                                                                                                                                                                                                                                                                                                                                                        - f: Rated frequency
                                                                                                                                                                                                                                                                                                                                                                                                                                        - pf: Rated power factor
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                None of the parameters can be set to 0."
                    
                    V {
                        label = "Voltage"
                        widget = edit
                        type = generic
                        default_value = "480"
                        unit = "VRMSLL"
                        group = "General"
            	    

                    }
                    
                    S {
                        label = "Power"
                        widget = edit
                        type = generic
                        default_value = "1200e3"
                        unit = "VA"
                        group = "General"
            	    

                    }
                    
                    f {
                        label = "Frequency"
                        widget = edit
                        type = generic
                        default_value = "sys_f"
                        unit = "Hz"
                        group = "General"
            	    

                    }
                    
                    pf {
                        label = "Power Factor"
                        widget = edit
                        type = generic
                        default_value = "0.9"
                        group = "General"
            	    

                    }
                    
            	
                CODE component_open
                    from typhoon.apps.schematic_editor.dialogs.component_property_dialogs.general import RegularComponentPropertiesDialog
                
                    dialog = RegularComponentPropertiesDialog(
                        component=component,
                        property_container=component.masks[-1],
                        current_diagram=current_diagram
                    )
                    dialog.exec_()
                    
                ENDCODE
                }
            }
            [
                position = 8952, 7568
                rotation = down
                scale = -1, 1
                size = 48, 64

            ]
            
            component Subsystem "Load2_25%" {
                layout = dynamic

                
                component pas_resistor Rc {
                    
                    resistance = "V**2/S*pf"
        	    
                }
                [
                    position = 8136, 8248

                ]
                
                component pas_resistor Rb {
                    
                    resistance = "V**2/S*pf"
        	    
                }
                [
                    position = 8136, 8192

                ]
                
                component pas_inductor Lb {
                    
                    inductance = "(V**2/S*np.sqrt(1-pf**2)) / (2.0*np.pi*f)"
        	    
                }
                [
                    position = 8232, 8192

                ]
                
                component pas_resistor Ra {
                    
                    resistance = "V**2/S*pf"
        	    
                }
                [
                    position = 8136, 8136

                ]
                
                component pas_inductor Lc {
                    
                    inductance = "(V**2/S*np.sqrt(1-pf**2)) / (2.0*np.pi*f)"
        	    
                }
                [
                    position = 8232, 8248

                ]
                
                component pas_inductor La {
                    
                    inductance = "(V**2/S*np.sqrt(1-pf**2)) / (2.0*np.pi*f)"
        	    
                }
                [
                    position = 8232, 8136

                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port A {
                    label = "A"
                    
                    position = left:1
                    kind = pe
                }
                [
                    position = 8056, 8136

                ]
                
                port B {
                    label = "B"
                    
                    position = left:2
                    kind = pe
                }
                [
                    position = 8056, 8192

                ]
                
                port C {
                    label = "C"
                    
                    position = left:3
                    kind = pe
                }
                [
                    position = 8056, 8248

                ]
                
                comment Comment1 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Copyright (c) 2016 Massachusetts Institute of Technology</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Permission is hereby granted, free of charge, to any person obtaining a copy of this </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">software and associated documentation files (the &quot;Software&quot;), to deal in the Software</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">without restriction, including without limitation the rights to use, copy, modify, </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">merge, publish, distribute, sublicense, and/or sell copies of the Software, and to </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">permit persons to whom the Software is furnished to do so, subject to the following </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">conditions:</p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">The above copyright notice and this permission notice shall be included in </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">all copies or substantial portions of the Software.</p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p></body></html> ENDCOMMENT 
                [
                    position = 7888, 7768

                ]
                
                junction Junction1 pe
                [
                    position = 8288, 8192

                ]
                connect Junction1 Lc.n_node as Connection30
                [
                            breakpoints =8288, 8192;8288, 8192

                ]
                connect La.n_node Junction1 as Connection16
                
                connect Lb.n_node Junction1 as Connection18
                
                connect Lb.p_node Rb.n_node as Connection13
                
                connect Ra.p_node A as Connection8
                
                connect Ra.n_node La.p_node as Connection12
                
                connect Rb.p_node B as Connection1
                
                connect Rc.p_node C as Connection10
                
                connect Rc.n_node Lc.p_node as Connection14
                
                
                S = "1000e3"
                V = "13800"
                pf = "pf"

                
                /*
                    Masks
                */
                mask {
                    icon = "image(\'component_figures/load_fig.jpg\')"
                    
                    description = "Three-phase series RL load. R and L values are calculated using input parameters:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    - V: Rated rms line-to-line voltage
                                                                                                                                                                                                                                                                                                                                                                                                                                        - S: Rated three-phase power
                                                                                                                                                                                                                                                                                                                                                                                                                                        - f: Rated frequency
                                                                                                                                                                                                                                                                                                                                                                                                                                        - pf: Rated power factor
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                None of the parameters can be set to 0."
                    
                    V {
                        label = "Voltage"
                        widget = edit
                        type = generic
                        default_value = "480"
                        unit = "VRMSLL"
                        group = "General"
            	    

                    }
                    
                    S {
                        label = "Power"
                        widget = edit
                        type = generic
                        default_value = "1200e3"
                        unit = "VA"
                        group = "General"
            	    

                    }
                    
                    f {
                        label = "Frequency"
                        widget = edit
                        type = generic
                        default_value = "sys_f"
                        unit = "Hz"
                        group = "General"
            	    

                    }
                    
                    pf {
                        label = "Power Factor"
                        widget = edit
                        type = generic
                        default_value = "0.9"
                        group = "General"
            	    

                    }
                    
            	
                CODE component_open
                    from typhoon.apps.schematic_editor.dialogs.component_property_dialogs.general import RegularComponentPropertiesDialog
                
                    dialog = RegularComponentPropertiesDialog(
                        component=component,
                        property_container=component.masks[-1],
                        current_diagram=current_diagram
                    )
                    dialog.exec_()
                    
                ENDCODE
                }
            }
            [
                position = 8960, 7888
                rotation = down
                scale = -1, 1
                size = 48, 64

            ]
            
            component Subsystem "Load1_50%" {
                layout = dynamic

                
                component pas_resistor Ra {
                    
                    resistance = "V**2/S*pf"
        	    
                }
                [
                    position = 8136, 8136

                ]
                
                component pas_resistor Rc {
                    
                    resistance = "V**2/S*pf"
        	    
                }
                [
                    position = 8136, 8248

                ]
                
                component pas_resistor Rb {
                    
                    resistance = "V**2/S*pf"
        	    
                }
                [
                    position = 8136, 8192

                ]
                
                component pas_inductor Lc {
                    
                    inductance = "(V**2/S*np.sqrt(1-pf**2)) / (2.0*np.pi*f)"
        	    
                }
                [
                    position = 8232, 8248

                ]
                
                component pas_inductor Lb {
                    
                    inductance = "(V**2/S*np.sqrt(1-pf**2)) / (2.0*np.pi*f)"
        	    
                }
                [
                    position = 8232, 8192

                ]
                
                component pas_inductor La {
                    
                    inductance = "(V**2/S*np.sqrt(1-pf**2)) / (2.0*np.pi*f)"
        	    
                }
                [
                    position = 8232, 8136

                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port A {
                    label = "A"
                    
                    position = left:1
                    kind = pe
                }
                [
                    position = 8056, 8136

                ]
                
                port B {
                    label = "B"
                    
                    position = left:2
                    kind = pe
                }
                [
                    position = 8056, 8192

                ]
                
                port C {
                    label = "C"
                    
                    position = left:3
                    kind = pe
                }
                [
                    position = 8056, 8248

                ]
                
                comment Comment1 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Copyright (c) 2016 Massachusetts Institute of Technology</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Permission is hereby granted, free of charge, to any person obtaining a copy of this </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">software and associated documentation files (the &quot;Software&quot;), to deal in the Software</p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">without restriction, including without limitation the rights to use, copy, modify, </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">merge, publish, distribute, sublicense, and/or sell copies of the Software, and to </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">permit persons to whom the Software is furnished to do so, subject to the following </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">conditions:</p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">The above copyright notice and this permission notice shall be included in </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">all copies or substantial portions of the Software.</p><p style="-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;"><br /></p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE </p><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p></body></html> ENDCOMMENT 
                [
                    position = 7888, 7768

                ]
                
                junction Junction1 pe
                [
                    position = 8288, 8192

                ]
                connect La.n_node Junction1 as Connection16
                
                connect Lb.n_node Junction1 as Connection18
                
                connect Lb.p_node Rb.n_node as Connection13
                
                connect Lc.n_node Junction1 as Connection30
                [
                            breakpoints =8288, 8192

                ]
                connect Ra.p_node A as Connection8
                
                connect Ra.n_node La.p_node as Connection12
                
                connect Rb.p_node B as Connection1
                
                connect Rc.p_node C as Connection10
                
                connect Rc.n_node Lc.p_node as Connection14
                
                
                S = "2000e3"
                V = "13800"
                pf = "pf"

                
                /*
                    Masks
                */
                mask {
                    icon = "image(\'component_figures/load_fig.jpg\')"
                    
                    description = "Three-phase series RL load. R and L values are calculated using input parameters:
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    - V: Rated rms line-to-line voltage
                                                                                                                                                                                                                                                                                                                                                                                                                                        - S: Rated three-phase power
                                                                                                                                                                                                                                                                                                                                                                                                                                        - f: Rated frequency
                                                                                                                                                                                                                                                                                                                                                                                                                                        - pf: Rated power factor
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                None of the parameters can be set to 0."
                    
                    V {
                        label = "Voltage"
                        widget = edit
                        type = generic
                        default_value = "480"
                        unit = "VRMSLL"
                        group = "General"
            	    

                    }
                    
                    S {
                        label = "Power"
                        widget = edit
                        type = generic
                        default_value = "1200e3"
                        unit = "VA"
                        group = "General"
            	    

                    }
                    
                    f {
                        label = "Frequency"
                        widget = edit
                        type = generic
                        default_value = "sys_f"
                        unit = "Hz"
                        group = "General"
            	    

                    }
                    
                    pf {
                        label = "Power Factor"
                        widget = edit
                        type = generic
                        default_value = "0.9"
                        group = "General"
            	    

                    }
                    
            	
                CODE component_open
                    from typhoon.apps.schematic_editor.dialogs.component_property_dialogs.general import RegularComponentPropertiesDialog
                
                    dialog = RegularComponentPropertiesDialog(
                        component=component,
                        property_container=component.masks[-1],
                        current_diagram=current_diagram
                    )
                    dialog.exec_()
                    
                ENDCODE
                }
            }
            [
                position = 8968, 8224
                rotation = down
                scale = -1, 1
                size = 48, 64

            ]
            component "core/Transmission Line" F1_line {
                
                C_imperial = "[[0.00233, 0.00140, 0.00140], [0.00140, 0.00233, 0.00140], [0.00140, 0.00140, 0.00233]]"
                C_sequence_metric = "[[5.089e-7, 0.0, 0.0], [0.0, 5.089e-7, 0.0], [0.0, 0.0, 5.089e-7]]"
                Frequency = "sys_f"
                L_sequence_imperial = "cbl_specs['L'][12]"
                L_sequence_metric = "[[0.0020, 0.0, 0.0], [0.0, 3.0953e-4, 0.0], [0.0, 0.0, 3.0953e-4]]"
                Length_metric = "1.6764"
                Length_miles = "0.094697"
                R_sequence_imperial = "cbl_specs['R'][12]"
                R_sequence_metric = "[[1.1405, 0.0, 0.0], [0.0, 0.0749, 0.0], [0.0, 0.0, 0.0749]]"
                model_def = "Sequence"
            }
            [
                position = 8432, 7568
                size = 256, 72

            ]
            
            component "core/Transmission Line" F1_line1 {
                
                C_imperial = "[[0.00233, 0.00140, 0.00140], [0.00140, 0.00233, 0.00140], [0.00140, 0.00140, 0.00233]]"
                C_sequence_metric = "[[5.089e-7, 0.0, 0.0], [0.0, 5.089e-7, 0.0], [0.0, 0.0, 5.089e-7]]"
                Frequency = "sys_f"
                L_sequence_imperial = "cbl_specs['L'][12]"
                L_sequence_metric = "[[0.0020, 0.0, 0.0], [0.0, 3.0953e-4, 0.0], [0.0, 0.0, 3.0953e-4]]"
                Length_metric = "1.6764"
                Length_miles = "0.094697"
                R_sequence_imperial = "cbl_specs['R'][12]"
                R_sequence_metric = "[[1.1405, 0.0, 0.0], [0.0, 0.0749, 0.0], [0.0, 0.0, 0.0749]]"
                model_def = "Sequence"
            }
            [
                position = 8448, 7888
                size = 256, 72

            ]
            
            component "core/Transmission Line" F1_line2 {
                
                C_imperial = "[[0.00233, 0.00140, 0.00140], [0.00140, 0.00233, 0.00140], [0.00140, 0.00140, 0.00233]]"
                C_sequence_metric = "[[5.089e-7, 0.0, 0.0], [0.0, 5.089e-7, 0.0], [0.0, 0.0, 5.089e-7]]"
                Frequency = "sys_f"
                L_sequence_imperial = "cbl_specs['L'][12]"
                L_sequence_metric = "[[0.0020, 0.0, 0.0], [0.0, 3.0953e-4, 0.0], [0.0, 0.0, 3.0953e-4]]"
                Length_metric = "1.6764"
                Length_miles = "0.094697"
                R_sequence_imperial = "cbl_specs['R'][12]"
                R_sequence_metric = "[[1.1405, 0.0, 0.0], [0.0, 0.0749, 0.0], [0.0, 0.0, 0.0749]]"
                model_def = "Sequence"
            }
            [
                position = 8456, 8224
                size = 256, 72

            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port A {
                label = "A"
                
                position = left:1
                kind = pe
            }
            [
                position = 7944, 7816

            ]
            
            port B {
                label = "B"
                
                position = left:2
                kind = pe
            }
            [
                position = 7944, 7888

            ]
            
            port C {
                label = "C"
                
                position = left:3
                kind = pe
            }
            [
                position = 7944, 7960

            ]
            
            junction Junction1 pe
            [
                position = 8224, 7888

            ]
            
            junction Junction2 pe
            [
                position = 8224, 7888

            ]
            
            junction Junction3 pe
            [
                position = 8192, 7816

            ]
            
            junction Junction4 pe
            [
                position = 8192, 7816

            ]
            
            junction Junction5 pe
            [
                position = 8160, 7960

            ]
            
            junction Junction6 pe
            [
                position = 8160, 7960

            ]
            connect A Junction3 as Connection4635
            
            connect B Junction1 as Connection4628
            
            connect C Junction5 as Connection4646
            
            connect F1_line.b_in Junction2 as Connection4631
            
            connect F1_line.a_in Junction4 as Connection4638
            
            connect F1_line.c_in Junction6 as Connection4649
            
            connect F1_line.c_out S3.c_in as Connection4622
            [
                        breakpoints =8576, 7584;8576, 7664

            ]
            connect F1_line1.b_out S2.b_in as Connection4619
            
            connect F1_line1.c_out S2.c_in as Connection4624
            [
                        breakpoints =8592, 7904;8592, 7984

            ]
            connect F1_line2.b_in Junction2 as Connection4633
            
            connect F1_line2.a_in Junction4 as Connection4640
            
            connect F1_line2.c_in Junction6 as Connection4651
            
            connect F1_line2.b_out S1.b_in as Connection4618
            
            connect Junction1 F1_line1.b_in as Connection4629
            
            connect Junction2 Junction1 as Connection4632
            
            connect Junction3 F1_line1.a_in as Connection4636
            
            connect Junction4 Junction3 as Connection4639
            
            connect Junction5 F1_line1.c_in as Connection4647
            [
                        breakpoints =8304, 7960;8304, 7904

            ]
            connect Junction6 Junction5 as Connection4650
            
            connect "Load1_50%.C" S1.a_out as Connection4617
            
            connect "Load1_50%.A" S1.c_out as Connection4615
            
            connect "Load2_25%.C" S2.a_out as Connection4613
            
            connect "Load2_25%.A" S2.c_out as Connection4614
            
            connect "Load3_25%.C" S3.a_out as Connection4609
            
            connect "Load3_25%.A" S3.c_out as Connection4611
            
            connect S1.a_in F1_line2.a_out as Connection4625
            
            connect S1.c_in F1_line2.c_out as Connection4626
            
            connect S1.b_out "Load1_50%.B" as Connection4616
            
            connect S2.a_in F1_line1.a_out as Connection4623
            
            connect S2.b_out "Load2_25%.B" as Connection4612
            
            connect S3.b_in F1_line.b_out as Connection4620
            
            connect S3.a_in F1_line.a_out as Connection4621
            
            connect S3.b_out "Load3_25%.B" as Connection4610
            
            
            cbl_specs = "cbl_specs"

            
            /*
                Masks
            */
            mask {
                description = "<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0//EN\" \"http://www.w3.org/TR/REC-html40/strict.dtd\"><html><head><meta name=\"qrichtext\" content=\"1\" /><style type=\"text/css\">p, li { white-space: pre-wrap; }</style></head><body style=\" font-family:\'MS Shell Dlg 2\'; font-size:8.25pt; font-weight:400; font-style:normal;\"><p style=\"-qt-paragraph-type:empty; margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; font-size:8pt;\"><br /></p></body></html>"
                
                pf {
                    label = "Power Factor"
                    widget = edit
                    type = generic
                    default_value = "0.9"
        	    

                }
                
                sys_f {
                    label = "Frequency"
                    widget = edit
                    type = generic
                    default_value = "sys_f"
        	    

                }
                
                cbl_specs {
                    label = "cbl_specs"
                    widget = edit
                    type = generic
                    default_value = "0"
        	    

                }
                
        	
            CODE component_open
                from typhoon.apps.schematic_editor.dialogs.component_property_dialogs.general import RegularComponentPropertiesDialog
            
                dialog = RegularComponentPropertiesDialog(
                    component=component,
                    property_container=component.masks[-1],
                    current_diagram=current_diagram
                )
                dialog.exec_()
                
            ENDCODE
            }
        }
        [
            position = 6392, 8360
            rotation = right
            scale = -1, 1
            size = 48, 64

        ]
        component "core/Transmission Line" F1_line1 {
            
            C_imperial = "[[0.00233, 0.00140, 0.00140], [0.00140, 0.00233, 0.00140], [0.00140, 0.00140, 0.00233]]"
            C_sequence_metric = "[[5.089e-7, 0.0, 0.0], [0.0, 5.089e-7, 0.0], [0.0, 0.0, 5.089e-7]]"
            Frequency = "sys_f"
            L_sequence_imperial = "cbl_specs['L'][12]"
            L_sequence_metric = "[[0.0020, 0.0, 0.0], [0.0, 3.0953e-4, 0.0], [0.0, 0.0, 3.0953e-4]]"
            Length_metric = "1.6764"
            Length_miles = "0.0094697"
            R_sequence_imperial = "cbl_specs['R'][12]"
            R_sequence_metric = "[[1.1405, 0.0, 0.0], [0.0, 0.0749, 0.0], [0.0, 0.0, 0.0749]]"
            model_def = "Sequence"
        }
        [
            position = 6392, 7904
            rotation = left
            size = 256, 72

        ]
        
        component "core/Transmission Line" F1_line2 {
            
            C_imperial = "[[0.00233, 0.00140, 0.00140], [0.00140, 0.00233, 0.00140], [0.00140, 0.00140, 0.00233]]"
            C_sequence_metric = "[[5.089e-7, 0.0, 0.0], [0.0, 5.089e-7, 0.0], [0.0, 0.0, 5.089e-7]]"
            Frequency = "sys_f"
            L_sequence_imperial = "cbl_specs['L'][12]"
            L_sequence_metric = "[[0.0020, 0.0, 0.0], [0.0, 3.0953e-4, 0.0], [0.0, 0.0, 3.0953e-4]]"
            Length_metric = "1.6764"
            Length_miles = "0.0094697"
            R_sequence_imperial = "cbl_specs['R'][12]"
            R_sequence_metric = "[[1.1405, 0.0, 0.0], [0.0, 0.0749, 0.0], [0.0, 0.0, 0.0749]]"
            model_def = "Sequence"
        }
        [
            position = 6896, 8800
            rotation = left
            size = 256, 72

        ]
        
        
        component Subsystem MS {
            layout = dynamic

            
            component gen_bus_join "Bus Join1" {
                
                inputs = "3"
    	    
            }
            [
                position = 7936, 8168
                rotation = left

            ]
            
            component gen_bus_join "Bus Join2" {
                
                execution_rate = "Ts"
                inputs = "3"
    	    
            }
            [
                position = 7576, 7784

            ]
            component "core/Current Measurement" IB {
                
                execution_rate = "Ts"
                sig_output = "True"
            }
            [
                position = 7432, 8024

            ]
            
            component "core/Voltage Measurement" VA {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
            }
            [
                position = 7728, 8224
                rotation = right

            ]
            
            component "core/Voltage Measurement" VC {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
            }
            [
                position = 7568, 8352
                rotation = right

            ]
            
            component "core/Voltage Measurement" VB {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
            }
            [
                position = 7648, 8288
                rotation = right

            ]
            
            component "core/Current Measurement" IC {
                
                execution_rate = "Ts"
                sig_output = "True"
            }
            [
                position = 7496, 8120

            ]
            
            component "core/Current Measurement" IA {
                
                execution_rate = "Ts"
                sig_output = "True"
            }
            [
                position = 7368, 7928

            ]
            
            
            component Subsystem res_for_meas {
                layout = dynamic

                
                component pas_resistor R3 {
                    
                    resistance = "1e5"
        	    
                }
                [
                    position = 8248, 8192
                    rotation = right

                ]
                
                component pas_resistor R1 {
                    
                    resistance = "1e5"
        	    
                }
                [
                    position = 8136, 8192
                    rotation = right

                ]
                
                component pas_resistor R2 {
                    
                    resistance = "1e5"
        	    
                }
                [
                    position = 8192, 8192
                    rotation = right

                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port P1 {
                    
                    position = top:1
                    kind = pe
                }
                [
                    position = 8136, 8112
                    rotation = right

                ]
                
                port P2 {
                    
                    position = top:2
                    kind = pe
                }
                [
                    position = 8192, 8112
                    rotation = right

                ]
                
                port P3 {
                    
                    position = top:3
                    kind = pe
                }
                [
                    position = 8248, 8112
                    rotation = right

                ]
                
                port P4 {
                    
                    position = bottom:1
                    kind = pe
                }
                [
                    position = 8192, 8272
                    rotation = left

                ]
                
                junction Junction1 pe
                [
                    position = 8192, 8240

                ]
                
                junction Junction2 pe
                [
                    position = 8192, 8240

                ]
                connect Junction1 P4 as Connection8
                
                connect Junction2 Junction1 as Connection11
                
                connect R1.n_node Junction1 as Connection7
                
                connect R1.p_node P1 as Connection1
                
                connect R2.n_node Junction2 as Connection10
                
                connect R2.p_node P2 as Connection6
                
                connect R3.n_node Junction2 as Connection12
                
                connect R3.p_node P3 as Connection2
                
                

                
            }
            [
                position = 7320, 8216
                size = 64, 48

            ]
            
            component Subsystem calc {
                layout = dynamic

                
                component gen_bus_split "Bus Split2" {
                    
                    outputs = "3"
        	    
                }
                [
                    position = 6640, 8792

                ]
                
                component gen_pll_three_phs "Three phase PLL1" {
                    
        	    
                }
                [
                    position = 7056, 8512

                ]
                
                component gen_probe Vpu {
                    
        	    
                }
                [
                    position = 7128, 8392

                ]
                
                component gen_terminator Termination4 {
                    
        	    
                }
                [
                    position = 7184, 8776
                    hide_name = True

                ]
                
                component gen_bus_split "Bus Split1" {
                    
                    outputs = "3"
        	    
                }
                [
                    position = 6664, 8568

                ]
                
                component gen_terminator Termination16 {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 7208, 8552
                    hide_name = True

                ]
                
                component gen_terminator Termination5 {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 7152, 8576
                    hide_name = True

                ]
                
                component gen_terminator Termination15 {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 7120, 8808
                    hide_name = True

                ]
                
                component gen_terminator Termination7 {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 7144, 8472
                    hide_name = True

                ]
                
                component gen_terminator Termination3 {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 7136, 8760
                    hide_name = True

                ]
                
                component gen_probe Q {
                    
        	    
                }
                [
                    position = 7176, 8696

                ]
                
                component gen_PQ_transform "PQ Power Meter" {
                    
        	    
                }
                [
                    position = 7056, 8768

                ]
                
                component gen_terminator Termination8 {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 7192, 8488
                    hide_name = True

                ]
                
                component gen_rms_value "RMS value4" {
                    
        	    
                }
                [
                    position = 6912, 8392

                ]
                
                component gen_terminator Termination9 {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 7232, 8504
                    hide_name = True

                ]
                
                component gen_probe f {
                    
        	    
                }
                [
                    position = 7296, 8528

                ]
                
                component gen_terminator Termination14 {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 7232, 8792
                    hide_name = True

                ]
                
                component gen_probe P {
                    
        	    
                }
                [
                    position = 7176, 8640

                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port V {
                    label = "V"
                    
                    position = left:4
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 6576, 8568
                    size = 25, 25

                ]
                
                port I {
                    label = "I"
                    
                    position = left:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 6568, 8792
                    size = 25, 25

                ]
                
                junction Junction53 sp
                [
                    position = 6752, 8552

                ]
                
                junction Junction54 sp
                [
                    position = 6768, 8568

                ]
                
                junction Junction55 sp
                [
                    position = 6784, 8584

                ]
                
                junction Junction56 sp
                [
                    position = 6752, 8480

                ]
                connect "Bus Split1.out" Junction53 as Connection179
                
                connect "Bus Split1.out1" Junction54 as Connection182
                
                connect "Bus Split1.out2" Junction55 as Connection185
                
                connect "Bus Split2.in" I as Connection187
                
                connect "Bus Split2.out1" "PQ Power Meter.ib" as Connection189
                
                connect "Bus Split2.out" "PQ Power Meter.ia" as Connection188
                
                connect Junction54 "Three phase PLL1.vb" as Connection181
                [
                            breakpoints =6768, 8568;6768, 8512

                ]
                connect Junction55 "PQ Power Meter.vc" as Connection184
                [
                            breakpoints =6784, 8584;6784, 8760;6872, 8760;7016, 8760

                ]
                connect Junction56 Junction53 as Connection193
                
                connect P.in "PQ Power Meter.Pdc" as Connection201
                
                connect "PQ Power Meter.ic" "Bus Split2.out2" as Connection190
                
                connect "PQ Power Meter.va" Junction53 as Connection177
                
                connect "PQ Power Meter.vb" Junction54 as Connection180
                
                connect "PQ Power Meter.Qdc" Q.in as Connection202
                
                connect "PQ Power Meter.apparent" Termination14.in as Connection140
                
                connect "PQ Power Meter.k_factor" Termination15.in as Connection169
                
                connect "RMS value4.in" Junction56 as Connection194
                
                connect "RMS value4.out" Vpu.in as Connection203
                
                connect Termination3.in "PQ Power Meter.Pac" as Connection50
                
                connect Termination4.in "PQ Power Meter.Qac" as Connection51
                
                connect Termination5.in "Three phase PLL1.sin_theta" as Connection52
                
                connect Termination7.in "Three phase PLL1.d_axis" as Connection53
                
                connect Termination8.in "Three phase PLL1.q_axis" as Connection54
                
                connect Termination9.in "Three phase PLL1.zero_axis" as Connection55
                
                connect "Three phase PLL1.vc" Junction55 as Connection183
                [
                            breakpoints =6784, 8568;6784, 8568

                ]
                connect "Three phase PLL1.va" Junction56 as Connection192
                [
                            breakpoints =6760, 8480;6760, 8480;6752, 8480

                ]
                connect "Three phase PLL1.theta" Termination16.in as Connection173
                
                connect "Three phase PLL1.freq" f.in as Connection197
                
                connect V "Bus Split1.in" as Connection186
                
                

                
            }
            [
                position = 8192, 7968
                size = 176, 152

            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port A {
                
                position = left:1
                kind = pe
            }
            [
                position = 7240, 7928

            ]
            
            port B {
                
                position = left:2
                kind = pe
            }
            [
                position = 7240, 8024

            ]
            
            port C {
                
                position = left:3
                kind = pe
            }
            [
                position = 7240, 8120

            ]
            
            port a {
                label = "a"
                
                position = right:1
                kind = pe
            }
            [
                position = 7800, 7928
                rotation = down

            ]
            
            port b {
                label = "b"
                
                position = right:2
                kind = pe
            }
            [
                position = 7800, 8024
                rotation = down

            ]
            
            port c {
                label = "c"
                
                position = right:3
                kind = pe
            }
            [
                position = 7800, 8120
                rotation = down

            ]
            
            junction Junction1421 pe
            [
                position = 7648, 8432

            ]
            
            junction Junction1466 pe
            [
                position = 7728, 7928

            ]
            
            junction Junction1467 pe
            [
                position = 7648, 8024

            ]
            
            junction Junction1468 pe
            [
                position = 7568, 8120

            ]
            
            junction Junction1470 pe
            [
                position = 7304, 7928

            ]
            
            junction Junction1471 pe
            [
                position = 7320, 8024

            ]
            
            junction Junction1472 pe
            [
                position = 7336, 8120

            ]
            
            junction Junction1473 pe
            [
                position = 7568, 8432

            ]
            connect A Junction1470 as Connection394
            
            connect B Junction1471 as Connection397
            
            connect "Bus Join1.in1" VB.out as Connection387
            
            connect "Bus Join1.in2" VC.out as Connection388
            
            connect "Bus Join2.in" IA.out as Connection407
            
            connect "Bus Join2.in1" IB.out as Connection391
            
            connect "Bus Join2.in2" IC.out as Connection392
            
            connect C Junction1472 as Connection400
            
            connect IA.n_node Junction1466 as Connection377
            
            connect Junction1421 Junction1473 as Connection406
            
            connect Junction1466 a as Connection299
            
            connect Junction1467 IB.n_node as Connection375
            
            connect Junction1467 b as Connection301
            
            connect Junction1468 IC.n_node as Connection376
            
            connect Junction1468 c as Connection302
            
            connect Junction1470 IA.p_node as Connection395
            
            connect Junction1471 IB.p_node as Connection398
            
            connect Junction1472 IC.p_node as Connection401
            
            connect Junction1473 VC.n_node as Connection404
            
            connect VA.out "Bus Join1.in" as Connection386
            
            connect VA.n_node Junction1421 as Connection237
            
            connect VA.p_node Junction1466 as Connection240
            
            connect VB.n_node Junction1421 as Connection203
            
            connect VB.p_node Junction1467 as Connection243
            
            connect VC.p_node Junction1468 as Connection246
            
            connect calc.V "Bus Join1.out" as Connection408
            
            connect calc.I "Bus Join2.out" as Connection413
            [
                        breakpoints =7992, 7904;7992, 7784;7672, 7784

            ]
            connect res_for_meas.P1 Junction1470 as Connection396
            
            connect res_for_meas.P2 Junction1471 as Connection399
            
            connect res_for_meas.P3 Junction1472 as Connection402
            
            connect res_for_meas.P4 Junction1473 as Connection405
            
            

            
        }
        [
            position = 6392, 7384
            rotation = right
            scale = -1, 1
            size = 56, 80

        ]
        component "core/Transmission Line" F1_line3 {
            
            C_imperial = "[[0.00233, 0.00140, 0.00140], [0.00140, 0.00233, 0.00140], [0.00140, 0.00140, 0.00233]]"
            C_sequence_metric = "[[5.089e-7, 0.0, 0.0], [0.0, 5.089e-7, 0.0], [0.0, 0.0, 5.089e-7]]"
            Frequency = "sys_f"
            L_sequence_imperial = "cbl_specs['L'][12]"
            L_sequence_metric = "[[0.0020, 0.0, 0.0], [0.0, 3.0953e-4, 0.0], [0.0, 0.0, 3.0953e-4]]"
            Length_metric = "1.6764"
            Length_miles = "0.0094697"
            R_sequence_imperial = "cbl_specs['R'][12]"
            R_sequence_metric = "[[1.1405, 0.0, 0.0], [0.0, 0.0749, 0.0], [0.0, 0.0, 0.0749]]"
            model_def = "Sequence"
        }
        [
            position = 6896, 8352
            rotation = left
            size = 256, 72

        ]
        
        
        component Subsystem GEN_MS {
            layout = dynamic

            
            component gen_bus_join "Bus Join2" {
                
                execution_rate = "Ts"
                inputs = "3"
    	    
            }
            [
                position = 7576, 7784

            ]
            
            component gen_bus_join "Bus Join1" {
                
                execution_rate = "Ts"
                inputs = "3"
    	    
            }
            [
                position = 7936, 8168
                rotation = left

            ]
            component "core/Current Measurement" IA {
                
                execution_rate = "Ts"
                sig_output = "True"
            }
            [
                position = 7368, 7928

            ]
            
            component "core/Voltage Measurement" VC {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
            }
            [
                position = 7568, 8352
                rotation = right

            ]
            
            component "core/Voltage Measurement" VB {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
            }
            [
                position = 7648, 8288
                rotation = right

            ]
            
            component "core/Current Measurement" IB {
                
                execution_rate = "Ts"
                sig_output = "True"
            }
            [
                position = 7432, 8024

            ]
            
            component "core/Voltage Measurement" VA {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
            }
            [
                position = 7728, 8224
                rotation = right

            ]
            
            component "core/Current Measurement" IC {
                
                execution_rate = "Ts"
                sig_output = "True"
            }
            [
                position = 7496, 8120

            ]
            
            
            component Subsystem calc {
                layout = dynamic

                
                component gen_terminator Termination4 {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 7184, 8776
                    hide_name = True

                ]
                
                component gen_terminator Termination16 {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 7208, 8552
                    hide_name = True

                ]
                
                component gen_rms_value "RMS value4" {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 6912, 8392

                ]
                
                component gen_terminator Termination9 {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 7232, 8504
                    hide_name = True

                ]
                
                component gen_probe Q {
                    
        	    
                }
                [
                    position = 7176, 8696

                ]
                
                component gen_terminator Termination15 {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 7120, 8808
                    hide_name = True

                ]
                
                component gen_PQ_transform "PQ Power Meter" {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 7056, 8768

                ]
                
                component gen_probe P {
                    
        	    
                }
                [
                    position = 7176, 8640

                ]
                
                component gen_bus_split "Bus Split2" {
                    
                    outputs = "3"
        	    
                }
                [
                    position = 6640, 8792

                ]
                
                component gen_terminator Termination14 {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 7232, 8792
                    hide_name = True

                ]
                
                component gen_bus_split "Bus Split1" {
                    
                    outputs = "3"
        	    
                }
                [
                    position = 6664, 8568

                ]
                
                component gen_probe f {
                    
        	    
                }
                [
                    position = 7296, 8528

                ]
                
                component gen_terminator Termination7 {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 7144, 8472
                    hide_name = True

                ]
                
                component gen_terminator Termination8 {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 7192, 8488
                    hide_name = True

                ]
                
                component gen_probe Vpu {
                    
        	    
                }
                [
                    position = 7128, 8392

                ]
                
                component gen_terminator Termination3 {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 7136, 8760
                    hide_name = True

                ]
                
                component gen_terminator Termination5 {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 7152, 8576
                    hide_name = True

                ]
                
                component gen_pll_three_phs "Three phase PLL1" {
                    
                    execution_rate = "Ts"
        	    
                }
                [
                    position = 7056, 8512

                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port V {
                    label = "V"
                    
                    position = left:4
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 6576, 8568
                    size = 25, 25

                ]
                
                port I {
                    label = "I"
                    
                    position = left:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 6568, 8792
                    size = 25, 25

                ]
                
                junction Junction53 sp
                [
                    position = 6752, 8552

                ]
                
                junction Junction54 sp
                [
                    position = 6768, 8568

                ]
                
                junction Junction55 sp
                [
                    position = 6784, 8584

                ]
                
                junction Junction56 sp
                [
                    position = 6752, 8480

                ]
                connect "Bus Split1.out" Junction53 as Connection179
                
                connect "Bus Split1.out1" Junction54 as Connection182
                
                connect "Bus Split1.out2" Junction55 as Connection185
                
                connect "Bus Split2.in" I as Connection187
                
                connect "Bus Split2.out1" "PQ Power Meter.ib" as Connection189
                
                connect "Bus Split2.out" "PQ Power Meter.ia" as Connection188
                
                connect Junction54 "Three phase PLL1.vb" as Connection181
                
                connect Junction55 "PQ Power Meter.vc" as Connection184
                
                connect Junction56 Junction53 as Connection193
                
                connect P.in "PQ Power Meter.Pdc" as Connection201
                
                connect "PQ Power Meter.ic" "Bus Split2.out2" as Connection190
                
                connect "PQ Power Meter.va" Junction53 as Connection177
                
                connect "PQ Power Meter.vb" Junction54 as Connection180
                
                connect "PQ Power Meter.Qdc" Q.in as Connection202
                
                connect "PQ Power Meter.apparent" Termination14.in as Connection140
                
                connect "PQ Power Meter.k_factor" Termination15.in as Connection169
                
                connect "RMS value4.in" Junction56 as Connection194
                
                connect "RMS value4.out" Vpu.in as Connection203
                
                connect Termination3.in "PQ Power Meter.Pac" as Connection50
                
                connect Termination4.in "PQ Power Meter.Qac" as Connection51
                
                connect Termination5.in "Three phase PLL1.sin_theta" as Connection52
                
                connect Termination7.in "Three phase PLL1.d_axis" as Connection53
                
                connect Termination8.in "Three phase PLL1.q_axis" as Connection54
                
                connect Termination9.in "Three phase PLL1.zero_axis" as Connection55
                
                connect "Three phase PLL1.vc" Junction55 as Connection183
                
                connect "Three phase PLL1.va" Junction56 as Connection192
                
                connect "Three phase PLL1.theta" Termination16.in as Connection173
                
                connect "Three phase PLL1.freq" f.in as Connection197
                
                connect V "Bus Split1.in" as Connection186
                
                

                
            }
            [
                position = 8192, 7968
                size = 176, 152

            ]
            
            component Subsystem res_for_meas {
                layout = dynamic

                
                component pas_resistor R1 {
                    
                    resistance = "1e5"
        	    
                }
                [
                    position = 8136, 8192
                    rotation = right

                ]
                
                component pas_resistor R3 {
                    
                    resistance = "1e5"
        	    
                }
                [
                    position = 8248, 8192
                    rotation = right

                ]
                
                component pas_resistor R2 {
                    
                    resistance = "1e5"
        	    
                }
                [
                    position = 8192, 8192
                    rotation = right

                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port P1 {
                    
                    position = top:1
                    kind = pe
                }
                [
                    position = 8136, 8112
                    rotation = right

                ]
                
                port P2 {
                    
                    position = top:2
                    kind = pe
                }
                [
                    position = 8192, 8112
                    rotation = right

                ]
                
                port P3 {
                    
                    position = top:3
                    kind = pe
                }
                [
                    position = 8248, 8112
                    rotation = right

                ]
                
                port P4 {
                    
                    position = bottom:1
                    kind = pe
                }
                [
                    position = 8192, 8272
                    rotation = left

                ]
                
                junction Junction1 pe
                [
                    position = 8192, 8240

                ]
                
                junction Junction2 pe
                [
                    position = 8192, 8240

                ]
                connect Junction1 P4 as Connection8
                
                connect Junction2 Junction1 as Connection11
                
                connect R1.n_node Junction1 as Connection7
                
                connect R1.p_node P1 as Connection1
                
                connect R2.n_node Junction2 as Connection10
                
                connect R2.p_node P2 as Connection6
                
                connect R3.n_node Junction2 as Connection12
                
                connect R3.p_node P3 as Connection2
                
                

                
            }
            [
                position = 7320, 8216
                size = 64, 48

            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port A {
                
                position = left:1
                kind = pe
            }
            [
                position = 7240, 7928

            ]
            
            port B {
                
                position = left:2
                kind = pe
            }
            [
                position = 7240, 8024

            ]
            
            port C {
                
                position = left:3
                kind = pe
            }
            [
                position = 7240, 8120

            ]
            
            port a {
                label = "a"
                
                position = right:1
                kind = pe
            }
            [
                position = 7800, 7928
                rotation = down

            ]
            
            port b {
                label = "b"
                
                position = right:2
                kind = pe
            }
            [
                position = 7800, 8024
                rotation = down

            ]
            
            port c {
                label = "c"
                
                position = right:3
                kind = pe
            }
            [
                position = 7800, 8120
                rotation = down

            ]
            
            junction Junction1421 pe
            [
                position = 7648, 8432

            ]
            
            junction Junction1466 pe
            [
                position = 7728, 7928

            ]
            
            junction Junction1467 pe
            [
                position = 7648, 8024

            ]
            
            junction Junction1468 pe
            [
                position = 7568, 8120

            ]
            
            junction Junction1470 pe
            [
                position = 7304, 7928

            ]
            
            junction Junction1471 pe
            [
                position = 7320, 8024

            ]
            
            junction Junction1472 pe
            [
                position = 7336, 8120

            ]
            
            junction Junction1473 pe
            [
                position = 7568, 8432

            ]
            connect A Junction1470 as Connection394
            
            connect B Junction1471 as Connection397
            
            connect "Bus Join1.in1" VB.out as Connection387
            
            connect "Bus Join1.in2" VC.out as Connection388
            
            connect "Bus Join2.in" IA.out as Connection407
            
            connect "Bus Join2.in1" IB.out as Connection391
            
            connect "Bus Join2.in2" IC.out as Connection392
            
            connect C Junction1472 as Connection400
            
            connect IA.n_node Junction1466 as Connection377
            
            connect Junction1421 Junction1473 as Connection406
            
            connect Junction1466 a as Connection299
            
            connect Junction1467 IB.n_node as Connection375
            
            connect Junction1467 b as Connection301
            
            connect Junction1468 IC.n_node as Connection376
            
            connect Junction1468 c as Connection302
            
            connect Junction1470 IA.p_node as Connection395
            
            connect Junction1471 IB.p_node as Connection398
            
            connect Junction1472 IC.p_node as Connection401
            
            connect Junction1473 VC.n_node as Connection404
            
            connect VA.out "Bus Join1.in" as Connection386
            
            connect VA.n_node Junction1421 as Connection237
            
            connect VA.p_node Junction1466 as Connection240
            
            connect VB.n_node Junction1421 as Connection203
            
            connect VB.p_node Junction1467 as Connection243
            
            connect VC.p_node Junction1468 as Connection246
            
            connect calc.V "Bus Join1.out" as Connection408
            
            connect calc.I "Bus Join2.out" as Connection413
            
            connect res_for_meas.P1 Junction1470 as Connection396
            
            connect res_for_meas.P2 Junction1471 as Connection399
            
            connect res_for_meas.P3 Junction1472 as Connection402
            
            connect res_for_meas.P4 Junction1473 as Connection405
            
            

            
        }
        [
            position = 6896, 8568
            rotation = left
            size = 56, 80

        ]
        
        component Subsystem "DIESEL GENSET1" {
            layout = dynamic

            
            component pas_resistor R66 {
                
                resistance = "1e3"
    	    
            }
            [
                position = 8824, 8712
                rotation = right

            ]
            
            component src_digital_input "Open GCB" {
                
                addr = "7"
                execution_rate = "Ts_gen"
    	    
            }
            [
                position = 7432, 8152

            ]
            
            component src_voltage V_noise_immunity {
                
    	    
            }
            [
                position = 8760, 8712
                rotation = right

            ]
            
            component src_digital_input "Fuel signal off" {
                
                addr = "4"
                execution_rate = "Ts_gen"
                invert = "true"
    	    
            }
            [
                position = 8040, 8008

            ]
            
            component src_digital_input "Close GCB" {
                
                addr = "6"
                execution_rate = "Ts_gen"
    	    
            }
            [
                position = 7536, 8064

            ]
            
            component src_digital_input Starter {
                
                addr = "3"
                execution_rate = "Ts_gen"
    	    
            }
            [
                position = 8040, 8064

            ]
            
            component src_digital_input "Open MCB" {
                
                addr = "9"
                execution_rate = "Ts_gen"
    	    
            }
            [
                position = 7536, 8248

            ]
            
            component sys_spc_marker "Core Marker1" {
                
    	    
            }
            [
                position = 8120, 8352

            ]
            
            component src_digital_input "Close MCB" {
                
                addr = "8"
                execution_rate = "Ts_gen"
    	    
            }
            [
                position = 7528, 8176

            ]
            
            component gen_probe "Electrical Torque" {
                
    	    
            }
            [
                position = 8720, 8296

            ]
            component "core/Triple Pole Single Throw Contactor" DIESEL_GCB {
                
                ctrl_src = "Model"
            }
            [
                position = 7928, 8504

            ]
            
            component "core/Synchronous Machine with Wound Rotor" NG_Gen {
                
                Jm = "J_gen1"
                Llfd = "Llfd_prime_gen1"
                Llkd = "Llkd_gen1"
                Llkq = "Llkq_gen1"
                Lls = "Lls_gen1"
                Lmd = "Lmd_gen1"
                Lmq = "Lmq_gen1"
                Ns_div_Nfd = "1"
                Ns_div_Nkd = "1"
                Ns_div_Nkq = "1"
                Rf = "Rf_prime_gen1"
                Rkd = "Rkd_gen1"
                Rkq = "Rkq_gen1"
                Rs = "Rs_gen1"
                el_torque_out_addr = "8200"
                enb_sig_out = "True"
                enc_ppr = "58"
                execution_rate = "-1"
                friction_coeff = "F_gen1"
                load_src = "Model"
                me_speed_out_addr = "8202"
                pms = "pms"
                res_int_carr_f = "5000.0"
            }
            [
                position = 8560, 8504

            ]
            
            component "core/Current Measurement" If {
                
            }
            [
                position = 8808, 8400
                scale = -1, 1

            ]
            
            component "core/Signal Controlled Voltage Source" Vfd {
                
            }
            [
                position = 8856, 8488
                rotation = right

            ]
            
            component "core/Voltage Measurement" Vfield {
                
            }
            [
                position = 8752, 8488
                rotation = right

            ]
            
            
            component Subsystem Exciter {
                layout = dynamic

                
                component gen_probe Vt_pu {
                    
                    addr = "17962"
                    execution_rate = "-1"
        	    
                }
                [
                    position = 7928, 8344

                ]
                
                component src_scada_input Vref {
                    
                    addr = "4294966780"
                    def_value = "1"
                    execution_rate = "-1"
                    max = "1000000.0"
                    min = "-1000000.0"
                    unit = "pu"
        	    
                }
                [
                    position = 7888, 8136

                ]
                
                component gen_digital_probe "Fuel off" {
                    
        	    
                }
                [
                    position = 8144, 8392

                ]
                
                component gen_probe Vf {
                    
                    addr = "17949"
                    execution_rate = "-1"
        	    
                }
                [
                    position = 8584, 8128

                ]
                
                component src_constant Vpss {
                    
                    execution_rate = "-1"
                    value = "[0]"
        	    
                }
                [
                    position = 8096, 8112

                ]
                
                component gen_gain Vt_to_Vtpu {
                    
                    gain = "1.0/Vb_gen2"
        	    
                }
                [
                    position = 7832, 8272

                ]
                
                component gen_sum Sum1 {
                    
        	    
                }
                [
                    position = 8480, 8192

                ]
                
                component src_scada_input Vf_stop {
                    
                    execution_rate = "-1"
                    unit = "V"
        	    
                }
                [
                    position = 8400, 8112

                ]
                
                component gen_sum Sum5 {
                    
                    execution_rate = "-1"
        	    
                }
                [
                    position = 7992, 8184

                ]
                
                component gen_gain Vfpu_to_Vf {
                    
                    execution_rate = "-1"
                    gain = "[35.296]"
        	    
                }
                [
                    position = 8584, 8192

                ]
                
                component sys_signal_switch "Signal switch1" {
                    
                    threshold = "0.5"
        	    
                }
                [
                    position = 8120, 8248

                ]
                
                component gen_DC1A_exciter "IEEE DC1A exciter1" {
                    
                    Ka = "Ka_gen2"
                    Ke = "Ke_gen2"
                    Kf = "Kf_gen2"
                    Ta = "Ta_gen2"
                    Te = "Te_gen2"
                    Tf = "Tf_gen2"
                    Tr = "Tr_gen2"
                    VRmax = "Efmax_gen2"
                    VRmin = "Efmin_gen2"
                    initial_field_voltage = "Vf0_gen2"
                    initial_terminal_voltage = "Vt0_gen2"
                    start_time = "0"
        	    
                }
                [
                    position = 8240, 8184

                ]
                
                component Subsystem "PI control" {
                    layout = dynamic

                    
                    component gen_gain ki {
                        
                        execution_rate = "-1"
                        gain = "[1.19]"
            	    
                    }
                    [
                        position = 8088, 8208

                    ]
                    
                    component gen_sum Sum6 {
                        
                        execution_rate = "-1"
            	    
                    }
                    [
                        position = 8304, 8192

                    ]
                    
                    component gen_integrator Integrator1 {
                        
                        limit_lower = "[-5]"
                        limit_output = "True"
                        limit_upper = "[5]"
                        show_reset = "level"
            	    
                    }
                    [
                        position = 8192, 8240

                    ]
                    
                    component gen_gain kp {
                        
                        execution_rate = "-1"
                        gain = "[1.16]"
            	    
                    }
                    [
                        position = 8088, 8152

                    ]
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    port In {
                        label = "In"
                        
                        position = left:1
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7968, 8152
                        size = 25, 25

                    ]
                    
                    port Reset {
                        label = "Reset"
                        
                        position = left:3
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7976, 8248
                        size = 25, 25

                    ]
                    
                    port Out {
                        label = "Out"
                        
                        position = right:1
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8376, 8192
                        size = 25, 25

                    ]
                    
                    junction Junction1 sp
                    [
                        position = 8016, 8152

                    ]
                    connect Integrator1.reset Reset as Connection1
                    
                    connect Integrator1.out Sum6.in1 as Connection2
                    
                    connect Junction1 In as Connection3
                    
                    connect Sum6.out Out as Connection4
                    
                    connect ki.out Integrator1.in as Connection5
                    
                    connect ki.in Junction1 as Connection6
                    
                    connect kp.in Junction1 as Connection7
                    
                    connect kp.out Sum6.in as Connection8
                    
                    

                    
                }
                [
                    position = 8376, 8200
                    size = 56, 64

                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port Delta_V_in {
                    label = "Delta_V_in"
                    
                    position = left:2
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7888, 8192
                    size = 25, 25

                ]
                
                port Vf_out {
                    label = "Vf_out"
                    
                    position = right:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8672, 8192
                    size = 25, 25

                ]
                
                port Fuel_off {
                    label = "Reset"
                    
                    position = left:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8048, 8328
                    size = 25, 25

                ]
                
                port Vt_in {
                    
                    position = auto:auto
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7752, 8272

                ]
                
                junction Junction103 sp
                [
                    position = 7864, 8272
                    size = 0, 0

                ]
                
                junction Junction104 sp
                [
                    position = 8080, 8328
                    size = 0, 0

                ]
                
                junction Junction109 sp
                [
                    position = 8088, 8184
                    size = 0, 0

                ]
                
                junction Junction110 sp
                [
                    position = 8112, 8328

                ]
                
                junction Junction111 sp
                [
                    position = 8528, 8192

                ]
                connect "IEEE DC1A exciter1.field_voltage" "PI control.In" as Connection1
                
                connect Junction103 Vt_to_Vtpu.out as Connection2
                
                connect Junction104 Fuel_off as Connection3
                
                connect Junction104 Junction110 as Connection4
                
                connect Junction109 "IEEE DC1A exciter1.vref" as Connection5
                
                connect Junction110 "Fuel off.in" as Connection6
                
                connect Junction111 Sum1.out as Connection7
                
                connect "PI control.Reset" Junction110 as Connection8
                
                connect "Signal switch1.out" "IEEE DC1A exciter1.terminal_voltage" as Connection9
                
                connect "Signal switch1.in1" Junction103 as Connection10
                
                connect "Signal switch1.in2" Junction104 as Connection11
                
                connect "Signal switch1.in" Junction109 as Connection12
                
                connect Sum1.in1 "PI control.Out" as Connection13
                
                connect Sum1.in Vf_stop.out as Connection14
                
                connect Sum5.in1 Delta_V_in as Connection15
                
                connect Sum5.out Junction109 as Connection16
                
                connect Sum5.in Vref.out as Connection17
                
                connect Vf.in Junction111 as Connection18
                
                connect Vfpu_to_Vf.in Junction111 as Connection19
                
                connect Vfpu_to_Vf.out Vf_out as Connection20
                
                connect Vpss.out "IEEE DC1A exciter1.vpss" as Connection21
                
                connect Vt_in Vt_to_Vtpu.in as Connection23
                
                connect Vt_pu.in Junction103 as Connection22
                
                

                
            }
            [
                position = 8992, 8488
                scale = -1, 1
                size = 128, 96

            ]
            
            component Subsystem Subsystem1 {
                layout = dynamic

                
                component gen_logic_op "Logical operator2" {
                    
                    operator = "NAND"
        	    
                }
                [
                    position = 8264, 8200
                    hide_name = True

                ]
                
                component gen_logic_op "Logical operator1" {
                    
                    operator = "NOT"
        	    
                }
                [
                    position = 8128, 8152
                    hide_name = True

                ]
                
                component gen_sr_ff "SR Flip Flop1" {
                    
        	    
                }
                [
                    position = 8152, 8240

                ]
                
                component gen_terminator Termination1 {
                    
        	    
                }
                [
                    position = 8272, 8256
                    hide_name = True

                ]
                
                component src_constant Constant1 {
                    
                    execution_rate = "-1"
                    value = "0"
        	    
                }
                [
                    position = 8064, 8272
                    hide_name = True

                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port "Fuel Signal OFF" {
                    
                    position = left:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 8000, 8152

                ]
                
                port Starter {
                    
                    position = left:2
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7968, 8224

                ]
                
                port Reset {
                    
                    position = right:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8368, 8200

                ]
                connect Constant1.out "SR Flip Flop1.r_in" as Connection140
                
                connect "Logical operator1.in" "Fuel Signal OFF" as Connection137
                
                connect "Logical operator1.out" "Logical operator2.in" as Connection133
                
                connect "Logical operator2.out" Reset as Connection135
                
                connect "SR Flip Flop1.out" "Logical operator2.in1" as Connection134
                
                connect "SR Flip Flop1.s_in" Starter as Connection136
                
                connect "SR Flip Flop1.out_n" Termination1.in as Connection141
                
                

                
            }
            [
                position = 8216, 8056
                size = 120, 64

            ]
            
            component Subsystem CB_control {
                layout = dynamic

                
                component gen_logic_op "Logical operator1" {
                    
        	    
                }
                [
                    position = 8136, 8240

                ]
                
                component gen_sr_ff "SR Flip Flop1" {
                    
        	    
                }
                [
                    position = 7744, 8240

                ]
                
                component gen_terminator Termination1 {
                    
        	    
                }
                [
                    position = 7824, 8256

                ]
                
                component gen_sr_ff "SR Flip Flop2" {
                    
        	    
                }
                [
                    position = 7784, 8352

                ]
                
                component gen_terminator Termination2 {
                    
        	    
                }
                [
                    position = 7856, 8376

                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port GCB_control {
                    label = "GCB_control"
                    
                    position = right:2
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8000, 8264
                    size = 25, 25

                ]
                
                port MCB_control {
                    label = "MCB_control"
                    
                    position = right:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8000, 8368
                    size = 25, 25

                ]
                
                port CB_status {
                    label = "CB_status"
                    
                    position = top:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8216, 8240
                    size = 25, 25

                ]
                
                port Close_GCB {
                    label = "Close_GCB"
                    
                    position = left:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7632, 8200
                    size = 25, 25

                ]
                
                port Open_GCB {
                    label = "Open_GCB"
                    
                    position = left:2
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7632, 8248
                    size = 25, 25

                ]
                
                port Close_MCB {
                    label = "Close_MCB"
                    
                    position = left:3
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7664, 8328
                    size = 25, 25

                ]
                
                port Open_MCB {
                    label = "Open_MCB"
                    
                    position = left:4
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7664, 8376
                    size = 25, 25

                ]
                
                junction Junction1 sp
                [
                    position = 7960, 8232

                ]
                
                junction Junction2 sp
                [
                    position = 7960, 8344

                ]
                connect Close_GCB "SR Flip Flop1.s_in" as Connection1
                
                connect Close_MCB "SR Flip Flop2.s_in" as Connection2
                
                connect GCB_control Junction1 as Connection3
                
                connect Junction1 "Logical operator1.in" as Connection4
                
                connect Junction2 "Logical operator1.in1" as Connection5
                
                connect "Logical operator1.out" CB_status as Connection6
                
                connect MCB_control Junction2 as Connection7
                
                connect Open_GCB "SR Flip Flop1.r_in" as Connection8
                
                connect Open_MCB "SR Flip Flop2.r_in" as Connection9
                
                connect "SR Flip Flop1.out" Junction1 as Connection10
                
                connect "SR Flip Flop2.out" Junction2 as Connection11
                
                connect Termination1.in "SR Flip Flop1.out_n" as Connection12
                
                connect Termination2.in "SR Flip Flop2.out_n" as Connection13
                
                

                
            }
            [
                position = 7776, 8168
                size = 176, 96

            ]
            
            component Subsystem P_control_loop {
                layout = dynamic

                
                component gen_gain Gain11 {
                    
                    gain = "[0.2]"
        	    
                }
                [
                    position = 8224, 8200

                ]
                
                component sys_spc_marker "Core Marker1" {
                    
        	    
                }
                [
                    position = 8024, 8104

                ]
                
                component gen_probe Delta_w_in {
                    
                    addr = "17944"
        	    
                }
                [
                    position = 8184, 8128

                ]
                component "core/Voltage Measurement" Delta_w {
                    
                    addr = "1538"
                    bw_limit = "True"
                    execution_rate = "Ts_gen"
                    frequency = "2e3"
                    sig_output = "True"
                }
                [
                    position = 8112, 8200
                    rotation = right

                ]
                
                component "core/Externally Controlled Voltage Source" V_Delta_w_in {
                    
                    ai_gain = "1"
                    ai_offset = "-0.342"
                    ai_pin_addr = "7"
                }
                [
                    position = 7944, 8200
                    rotation = right
                    size = 64, 48

                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port Delta_w_out {
                    label = "Delta_w_out"
                    
                    position = right:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8304, 8200
                    size = 25, 25

                ]
                
                comment Comment1 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Parameters for this external voltage source and gain are taken from: Mach_exc_gov......updated_starter_v2.tse</p></body></html> ENDCOMMENT 
                [
                    position = 7832, 8008

                ]
                
                junction Junction1324 sp
                [
                    position = 8152, 8200
                    size = 0, 0

                ]
                
                junction Junction1325 pe
                [
                    position = 8024, 8160

                ]
                connect "Core Marker1.node" Junction1325 as Connection12
                
                connect Delta_w.out Junction1324 as Connection3
                
                connect Delta_w.n_node V_Delta_w_in.n_node as Connection4
                
                connect Gain11.out Delta_w_out as Connection5
                
                connect Gain11.in Junction1324 as Connection6
                
                connect Junction1324 Delta_w_in.in as Connection8
                
                connect Junction1325 Delta_w.p_node as Connection11
                
                connect V_Delta_w_in.p_node Junction1325 as Connection10
                
                

                
            }
            [
                position = 8168, 8168
                size = 96, 56

            ]
            
            component Subsystem Q_control_loop {
                layout = dynamic

                
                component gen_probe Delta_V_in {
                    
                    addr = "17961"
        	    
                }
                [
                    position = 8264, 8136

                ]
                
                component gen_gain stability_gain {
                    
                    gain = "0.2"
        	    
                }
                [
                    position = 8256, 8208

                ]
                
                component sys_spc_marker "Core Marker1" {
                    
        	    
                }
                [
                    position = 8016, 8120

                ]
                component "core/Voltage Measurement" Delta_V {
                    
                    addr = "1540"
                    bw_limit = "True"
                    execution_rate = "Ts_gen"
                    frequency = "2e3"
                    sig_output = "True"
                }
                [
                    position = 8112, 8208
                    rotation = right

                ]
                
                component "core/Externally Controlled Voltage Source" V_Delta_V {
                    
                    ai_gain = "1"
                    ai_offset = "-0.342"
                    ai_pin_addr = "8"
                }
                [
                    position = 7960, 8208
                    rotation = right
                    size = 64, 48

                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port Delta_V_out {
                    label = "Delta_V_out"
                    
                    position = right:1
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8344, 8208
                    size = 25, 25

                ]
                
                comment Comment1 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">Parameters for this external voltage source and gain are taken from: Mach_exc_gov......updated_starter_v2.tse</p></body></html> ENDCOMMENT 
                [
                    position = 7856, 7992

                ]
                
                junction Junction1323 sp
                [
                    position = 8184, 8208

                ]
                
                junction Junction1324 pe
                [
                    position = 8016, 8168

                ]
                connect "Core Marker1.node" Junction1324 as Connection17
                
                connect Delta_V.p_node Junction1324 as Connection15
                
                connect Delta_V_in.in Junction1323 as Connection11
                
                connect Delta_V_out stability_gain.out as Connection12
                
                connect Junction1323 Delta_V.out as Connection10
                
                connect Junction1324 V_Delta_V.p_node as Connection16
                
                connect V_Delta_V.n_node Delta_V.n_node as Connection6
                
                connect stability_gain.in Junction1323 as Connection13
                
                

                
            }
            [
                position = 9216, 8488
                scale = -1, 1
                size = 88, 48

            ]
            
            component Subsystem Governor_and_Diesel_Engine {
                layout = dynamic

                
                component gen_probe Tmech_SI {
                    
                    addr = "17970"
                    execution_rate = "-1"
        	    
                }
                [
                    position = 8304, 8272

                ]
                
                component gen_probe wmeas {
                    
                    addr = "17960"
                    execution_rate = "-1"
                    signal_type = "angular speed"
        	    
                }
                [
                    position = 7696, 8440

                ]
                
                component gen_gain "w to wpu" {
                    
                    execution_rate = "-1"
                    gain = "1.0/wmb_gen1"
        	    
                }
                [
                    position = 7584, 8416
                    rotation = down
                    scale = -1, 1

                ]
                
                component gen_sum Sum3 {
                    
                    signs = "++-"
        	    
                }
                [
                    position = 7712, 8328

                ]
                
                component gen_probe Tmech_pu {
                    
                    addr = "17963"
        	    
                }
                [
                    position = 8168, 8400

                ]
                
                component src_scada_input wref {
                    
                    addr = "4294966776"
                    def_value = "1"
                    execution_rate = "Ts_gen"
                    max = "1000000.0"
                    min = "-1000000.0"
                    unit = ""
        	    
                }
                [
                    position = 7560, 8328

                ]
                
                component gen_gain "Tpu to T" {
                    
                    gain = "[-21495]"
        	    
                }
                [
                    position = 8160, 8328

                ]
                
                component Subsystem "Woodward DEGOV" {
                    layout = dynamic

                    
                    component gen_probe grid_contactor_on_ {
                        
                        addr = "17941"
                        signal_type = "angular speed"
            	    
                    }
                    [
                        position = 7960, 8008

                    ]
                    
                    component sys_signal_switch switch {
                        
                        threshold = "0.5"
            	    
                    }
                    [
                        position = 8040, 8224

                    ]
                    
                    component gen_probe lead_lag_input {
                        
                        addr = "17936"
                        signal_type = "angular speed"
            	    
                    }
                    [
                        position = 8152, 8168

                    ]
                    
                    component gen_probe reset_integrator_governor {
                        
                        addr = "17937"
                        signal_type = "angular speed"
            	    
                    }
                    [
                        position = 8496, 8392

                    ]
                    
                    component gen_probe integrator_governor_processed_output {
                        
                        addr = "17933"
                        signal_type = "angular speed"
            	    
                    }
                    [
                        position = 8744, 8200

                    ]
                    
                    component gen_z_domain_transfer TF3 {
                        
                        a_coeff = "denTF3d"
                        b_coeff = "numTF3d"
            	    
                    }
                    [
                        position = 8280, 8224

                    ]
                    
                    component gen_product Product1 {
                        
            	    
                    }
                    [
                        position = 8608, 8280

                    ]
                    
                    component gen_gain GainK {
                        
                        gain = "K"
            	    
                    }
                    [
                        position = 8352, 8224

                    ]
                    
                    component gen_transport_delay "Transport Delay1" {
                        
                        init_value = "Pm0"
                        time_delay = "Td"
            	    
                    }
                    [
                        position = 8712, 8280

                    ]
                    
                    component gen_logic_op "Logical operator1" {
                        
                        operator = "NOT"
            	    
                    }
                    [
                        position = 8512, 8312

                    ]
                    
                    component src_constant zero {
                        
                        execution_rate = "-1"
                        value = "[0]"
            	    
                    }
                    [
                        position = 7680, 8224

                    ]
                    
                    component gen_logic_op not {
                        
                        operator = "NOT"
            	    
                    }
                    [
                        position = 7768, 8288

                    ]
                    
                    component gen_probe gridtied_pid_output {
                        
                        addr = "17966"
                        signal_type = "angular speed"
            	    
                    }
                    [
                        position = 8016, 8136

                    ]
                    
                    component gen_z_domain_transfer TF4 {
                        
                        a_coeff = "denTF4d"
                        b_coeff = "numTF4d"
            	    
                    }
                    [
                        position = 8216, 8224

                    ]
                    
                    component sys_signal_switch switch1 {
                        
                        threshold = "0.5"
            	    
                    }
                    [
                        position = 7768, 8208

                    ]
                    
                    component gen_probe gridtied_pid_input {
                        
                        addr = "17953"
                        signal_type = "angular speed"
            	    
                    }
                    [
                        position = 7960, 8080

                    ]
                    
                    component gen_integrator Integrator1 {
                        
                        init_value = "Pm0"
                        limit_lower = "Tmin"
                        limit_output = "True"
                        limit_upper = "Tmax"
                        show_reset = "level"
            	    
                    }
                    [
                        position = 8504, 8232

                    ]
                    
                    component gen_sum Sum1 {
                        
                        signs = "+-"
            	    
                    }
                    [
                        position = 8792, 8360

                    ]
                    
                    component gen_gain PumpingLosses {
                        
                        gain = "-1"
            	    
                    }
                    [
                        position = 7936, 8440

                    ]
                    
                    component Subsystem "pid grid controller" {
                        layout = dynamic

                        
                        component gen_pid_controller "grid-tied control" {
                            
                            controller_type = "PD"
                            filt_coef = "1.0/0.42"
                            kd = "-4.47"
                            ki = "134"
                            kp = "10.6"
                	    
                        }
                        [
                            position = 8296, 8192

                        ]
                        
                        component gen_integrator Integrator1 {
                            
                            execution_rate = "-1"
                            init_value = "Pm0"
                            limit_lower = "Tmin"
                            limit_output = "True"
                            limit_upper = "Tmax"
                            show_reset = "level"
                	    
                        }
                        [
                            position = 8312, 8288

                        ]
                        
                        component gen_sum Sum1 {
                            
                	    
                        }
                        [
                            position = 8424, 8224

                        ]
                        
                        component gen_gain ki {
                            
                            gain = "[134]"
                	    
                        }
                        [
                            position = 8232, 8280

                        ]
                        
                        component gen_terminator Termination1 {
                            
                	    
                        }
                        [
                            position = 8520, 8312

                        ]
                        
                        component gen_z_domain_transfer "OPAL PD compensator" {
                            
                            a_coeff = "[1,0]"
                            b_coeff = "[5001, -5000]"
                	    
                        }
                        [
                            position = 8344, 8128

                        ]
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        port reset_integrator {
                            label = "Reset"
                            
                            position = left:2
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 8144, 8328
                            size = 25, 25

                        ]
                        
                        port Out {
                            label = "Out"
                            
                            position = right:1
                            kind = sp
                            direction = in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 8520, 8224
                            size = 25, 25

                        ]
                        
                        port In {
                            label = "In"
                            
                            position = left:1
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 8128, 8192
                            size = 25, 25

                        ]
                        
                        junction Junction1 sp
                        [
                            position = 8200, 8192
                            size = 0, 0

                        ]
                        
                        junction Junction2 sp
                        [
                            position = 8200, 8192

                        ]
                        connect Integrator1.in ki.out as Connection1
                        
                        connect Junction1 Junction2 as Connection10
                        
                        connect Junction2 In as Connection11
                        
                        connect "OPAL PD compensator.in" Junction2 as Connection12
                        [
                                    breakpoints =8200, 8136;8200, 8192

                        ]
                        connect "OPAL PD compensator.out" Out as Connection13
                        
                        connect Sum1.in1 Integrator1.out as Connection3
                        
                        connect Sum1.in "grid-tied control.out" as Connection5
                        
                        connect Termination1.in Sum1.out as Connection9
                        
                        connect "grid-tied control.in" Junction1 as Connection6
                        
                        connect ki.in Junction1 as Connection7
                        
                        connect reset_integrator Integrator1.reset as Connection8
                        
                        

                        
                    }
                    [
                        position = 7880, 8216
                        size = 80, 56

                    ]
                    
                    component Subsystem "pid vf droop controller" {
                        layout = dynamic

                        
                        component gen_pid_controller TestControl {
                            
                            controller_type = "PD"
                            execution_rate = "-1"
                            filt_coef = "10000"
                            kd = "0.5"
                            ki = "134"
                            kp = "1.5"
                	    
                        }
                        [
                            position = 8320, 8216

                        ]
                        
                        
                        
                        
                        
                        
                        port Out {
                            label = "Out"
                            
                            position = right:1
                            kind = sp
                            direction = in
                            sp_type {
                                default = inherit
                                readonly = True
                            }
                        }
                        [
                            position = 8400, 8216
                            size = 25, 25

                        ]
                        
                        port In {
                            label = "In"
                            
                            position = left:1
                            kind = sp
                            direction = out
                            sp_type {
                                default = auto
                                readonly = True
                            }
                        }
                        [
                            position = 8240, 8216
                            size = 25, 25

                        ]
                        connect In TestControl.in as Connection45
                        
                        connect TestControl.out Out as Connection44
                        
                        

                        
                    }
                    [
                        position = 7880, 8344
                        size = 80, 56

                    ]
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    tag Goto1 {
                        value = "F1_DIESEL_FUEL"
                        scope = global
                        kind = sp
                        direction = in
                    }
                    [
                        position = 8736, 8160
                        hide_name = True

                    ]
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    port CB_Status {
                        label = "CB_status"
                        
                        position = left:1
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7600, 8008
                        size = 25, 25

                    ]
                    
                    port Reset {
                        label = "Reset"
                        
                        position = left:3
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8280, 8344
                        rotation = left
                        size = 25, 25

                    ]
                    
                    port Torque {
                        label = "Torque [pu]"
                        
                        position = right:1
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8856, 8280
                        size = 25, 25

                    ]
                    
                    port Speed {
                        label = "Speed [pu]"
                        
                        position = left:2
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7592, 8232
                        size = 25, 25

                    ]
                    
                    junction Junction51 sp
                    [
                        position = 8464, 8312
                        size = 0, 0

                    ]
                    
                    junction Junction52 sp
                    [
                        position = 7768, 8008
                        size = 0, 0

                    ]
                    
                    junction Junction53 sp
                    [
                        position = 7640, 8232
                        size = 0, 0

                    ]
                    
                    junction Junction55 sp
                    [
                        position = 8464, 8312
                        size = 0, 0

                    ]
                    
                    junction Junction57 sp
                    [
                        position = 8656, 8280
                        size = 0, 0

                    ]
                    
                    junction Junction58 sp
                    [
                        position = 7808, 8208
                        size = 0, 0

                    ]
                    
                    junction Junction59 sp
                    [
                        position = 7936, 8208
                        size = 0, 0

                    ]
                    
                    junction Junction60 sp
                    [
                        position = 7768, 8152
                        size = 0, 0

                    ]
                    
                    junction Junction61 sp
                    [
                        position = 7872, 8008
                        size = 0, 0

                    ]
                    
                    junction Junction63 sp
                    [
                        position = 8656, 8200

                    ]
                    
                    junction Junction66 sp
                    [
                        position = 7808, 8288

                    ]
                    
                    junction Junction68 sp
                    [
                        position = 8088, 8224

                    ]
                    
                    junction Junction69 sp
                    [
                        position = 7640, 8336

                    ]
                    connect GainK.out Integrator1.in as Connection105
                    
                    connect Goto1 Junction63 as Connection62
                    
                    connect Integrator1.reset Junction51 as Connection2
                    
                    connect Integrator1.out Product1.in as Connection3
                    
                    connect Junction51 Junction55 as Connection4
                    
                    connect Junction51 Reset as Connection5
                    
                    connect Junction52 CB_Status as Connection6
                    
                    connect Junction52 Junction61 as Connection7
                    
                    connect Junction53 Junction69 as Connection102
                    [
                                breakpoints =7640, 8232;7640, 8232

                    ]
                    connect Junction53 Speed as Connection8
                    
                    connect Junction55 "Logical operator1.in" as Connection9
                    
                    connect Junction57 "Transport Delay1.in" as Connection10
                    
                    connect Junction58 gridtied_pid_input.in as Connection11
                    
                    connect Junction59 gridtied_pid_output.in as Connection12
                    [
                                breakpoints =7936, 8208;7936, 8136

                    ]
                    connect Junction60 Junction52 as Connection13
                    
                    connect Junction61 switch.in2 as Connection14
                    
                    connect Junction63 Junction57 as Connection61
                    
                    connect Junction66 "pid grid controller.reset_integrator" as Connection77
                    
                    connect Junction68 lead_lag_input.in as Connection99
                    [
                                breakpoints =8088, 8224;8088, 8224

                    ]
                    connect Junction69 PumpingLosses.in as Connection103
                    [
                                breakpoints =7640, 8344;7640, 8344

                    ]
                    connect "Logical operator1.out" Product1.in1 as Connection16
                    
                    connect Product1.out Junction57 as Connection17
                    
                    connect PumpingLosses.out Sum1.in1 as Connection94
                    
                    connect Sum1.out Torque as Connection87
                    
                    connect Sum1.in "Transport Delay1.out" as Connection88
                    
                    connect TF3.out GainK.in as Connection68
                    
                    connect TF4.in Junction68 as Connection98
                    
                    connect TF4.out TF3.in as Connection67
                    
                    connect grid_contactor_on_.in Junction61 as Connection21
                    
                    connect integrator_governor_processed_output.in Junction63 as Connection60
                    
                    connect not.in Junction60 as Connection24
                    
                    connect not.out Junction66 as Connection76
                    
                    connect "pid grid controller.In" Junction58 as Connection26
                    
                    connect "pid grid controller.Out" Junction59 as Connection27
                    
                    connect "pid vf droop controller.In" Junction69 as Connection104
                    [
                                breakpoints =7640, 8336;7640, 8344

                    ]
                    connect "pid vf droop controller.Out" switch.in1 as Connection97
                    
                    connect reset_integrator_governor.in Junction55 as Connection28
                    
                    connect switch.in Junction59 as Connection30
                    
                    connect switch.out Junction68 as Connection100
                    
                    connect switch1.in Junction53 as Connection33
                    
                    connect switch1.out Junction58 as Connection34
                    
                    connect switch1.in2 Junction60 as Connection35
                    
                    connect zero.out switch1.in1 as Connection36
                    
                    

                    
                }
                [
                    position = 8000, 8328
                    size = 184, 80

                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port T_out {
                    label = "T_out"
                    
                    position = right:2
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 8240, 8352
                    size = 25, 25

                ]
                
                port Delta_w_in {
                    label = "Delta_w_in"
                    
                    position = left:2
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7592, 8224
                    size = 25, 25

                ]
                
                port w_meas_in {
                    label = "w_meas_in"
                    
                    position = left:3
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7512, 8416
                    rotation = down
                    scale = -1, 1
                    size = 25, 25

                ]
                
                port reset_integrator {
                    label = "Reset"
                    
                    position = left:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7784, 8376
                    size = 25, 25

                ]
                
                port Contactor_status {
                    label = "CB_status"
                    
                    position = top:1
                    kind = sp
                    direction = out
                    sp_type {
                        default = auto
                        readonly = True
                    }
                }
                [
                    position = 7784, 8280
                    size = 25, 25

                ]
                
                junction Junction50 sp
                [
                    position = 7616, 8416
                    size = 0, 0

                ]
                
                junction Junction63 sp
                [
                    position = 8120, 8328

                ]
                
                junction Junction64 sp
                [
                    position = 8200, 8328

                ]
                connect Contactor_status "Woodward DEGOV.CB_Status" as Connection1
                
                connect Delta_w_in Sum3.in as Connection332
                
                connect Junction50 Sum3.in2 as Connection331
                
                connect Junction50 "w to wpu.out" as Connection3
                
                connect Junction50 wmeas.in as Connection302
                
                connect Junction63 "Tpu to T.in" as Connection4
                
                connect Junction63 "Woodward DEGOV.Torque" as Connection5
                
                connect Junction64 T_out as Connection6
                
                connect Junction64 Tmech_SI.in as Connection293
                
                connect Sum3.out "Woodward DEGOV.Speed" as Connection8
                
                connect Tmech_pu.in Junction63 as Connection330
                
                connect "Tpu to T.out" Junction64 as Connection11
                
                connect reset_integrator "Woodward DEGOV.Reset" as Connection12
                
                connect w_meas_in "w to wpu.in" as Connection13
                
                connect wref.out Sum3.in1 as Connection15
                
                

                
            }
            [
                position = 8496, 8168
                size = 152, 112

            ]
            
            component Subsystem DIESEL_GCB_Measurements {
                layout = dynamic

                
                component gen_gain Gain7 {
                    
                    gain = "[0.25e-6]"
        	    
                }
                [
                    position = 7656, 7792
                    scale = -1, 1

                ]
                
                component pas_capacitor C1 {
                    
        	    
                }
                [
                    position = 8640, 8224
                    rotation = right

                ]
                
                component pas_capacitor C3 {
                    
        	    
                }
                [
                    position = 8712, 8224
                    rotation = right

                ]
                
                component pas_resistor R21 {
                    
                    resistance = "4716"
        	    
                }
                [
                    position = 8856, 8312
                    rotation = right

                ]
                
                component pas_capacitor C2 {
                    
        	    
                }
                [
                    position = 8784, 8224
                    rotation = right

                ]
                
                component gen_gain Gain8 {
                    
                    gain = "[0.25e-6]"
        	    
                }
                [
                    position = 7656, 7736
                    scale = -1, 1

                ]
                
                component gen_probe S_Gen1 {
                    
                    addr = "17951"
        	    
                }
                [
                    position = 7576, 7792
                    scale = -1, 1

                ]
                
                component gen_probe P_Gen1 {
                    
                    addr = "17965"
        	    
                }
                [
                    position = 7576, 7680
                    scale = -1, 1

                ]
                
                component gen_gain normalize {
                    
                    gain = "np.sqrt(3.0/2.0)/13800.0"
        	    
                }
                [
                    position = 7664, 7608
                    scale = -1, 1

                ]
                
                component gen_gain Gain9 {
                    
                    gain = "[0.25e-6]"
        	    
                }
                [
                    position = 7656, 7680
                    scale = -1, 1

                ]
                
                component pas_resistor R15 {
                    
                    resistance = "100"
        	    
                }
                [
                    position = 8712, 8336
                    rotation = right

                ]
                
                component gen_probe Q_Gen1 {
                    
                    addr = "17938"
        	    
                }
                [
                    position = 7576, 7736
                    scale = -1, 1

                ]
                
                component pas_resistor R14 {
                    
                    resistance = "100"
        	    
                }
                [
                    position = 8640, 8336
                    rotation = right

                ]
                
                component pas_resistor R22 {
                    
                    resistance = "4716"
        	    
                }
                [
                    position = 9000, 8312
                    rotation = right

                ]
                
                component pas_resistor R16 {
                    
                    resistance = "100"
        	    
                }
                [
                    position = 8784, 8336
                    rotation = right

                ]
                
                component pas_resistor R20 {
                    
                    resistance = "4716"
        	    
                }
                [
                    position = 8928, 8312
                    rotation = right

                ]
                component "core/Current Measurement" Ic {
                    
                    addr = "26"
                    execution_rate = "Ts_gen"
                    frequency = "10000.0"
                    sig_output = "True"
                }
                [
                    position = 8248, 8160
                    scale = -1, 1

                ]
                
                component "core/Voltage Measurement" Va {
                    
                    addr = "3"
                    execution_rate = "Ts_gen"
                    sig_output = "True"
                }
                [
                    position = 8040, 8216
                    rotation = right
                    scale = -1, 1

                ]
                
                component "core/Current Measurement" Ia {
                    
                    addr = "22"
                    execution_rate = "Ts_gen"
                    frequency = "10000.0"
                    sig_output = "True"
                }
                [
                    position = 8440, 7968
                    scale = -1, 1

                ]
                
                component "core/Voltage Measurement" Vb {
                    
                    addr = "4"
                    execution_rate = "Ts_gen"
                    sig_output = "True"
                }
                [
                    position = 8104, 8288
                    rotation = right
                    scale = -1, 1

                ]
                
                component "core/Voltage Measurement" Vc {
                    
                    addr = "5"
                    execution_rate = "Ts_gen"
                    sig_output = "True"
                }
                [
                    position = 8168, 8360
                    rotation = right
                    scale = -1, 1

                ]
                
                component "core/Current Measurement" Ib {
                    
                    addr = "24"
                    execution_rate = "Ts_gen"
                    frequency = "10000.0"
                    sig_output = "True"
                }
                [
                    position = 8336, 8064
                    scale = -1, 1

                ]
                
                
                component Subsystem "Calculate Vt" {
                    layout = dynamic

                    
                    component gen_terminator Termination4 {
                        
            	    
                    }
                    [
                        position = 8008, 8248

                    ]
                    
                    component gen_terminator Termination1 {
                        
            	    
                    }
                    [
                        position = 8152, 8144

                    ]
                    
                    component src_constant cte2 {
                        
                        execution_rate = "-1"
                        value = "[2]"
            	    
                    }
                    [
                        position = 8192, 8088

                    ]
                    
                    component gen_math_fnc squaring {
                        
                        mathematical_fn = "power"
            	    
                    }
                    [
                        position = 8296, 7992

                    ]
                    
                    component gen_pll_three_phs "Voltage PLL" {
                        
                        execution_rate = "-1"
            	    
                    }
                    [
                        position = 7912, 8152

                    ]
                    
                    component gen_terminator Termination3 {
                        
            	    
                    }
                    [
                        position = 8040, 8192

                    ]
                    
                    component gen_math_fnc squaring1 {
                        
                        execution_rate = "-1"
                        mathematical_fn = "power"
            	    
                    }
                    [
                        position = 8296, 8056

                    ]
                    
                    component gen_math_fnc squareRoot {
                        
                        execution_rate = "-1"
                        mathematical_fn = "sqrt"
            	    
                    }
                    [
                        position = 8456, 8024

                    ]
                    
                    component gen_sum Sum2 {
                        
                        execution_rate = "-1"
            	    
                    }
                    [
                        position = 8376, 8024

                    ]
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    port Va_in {
                        label = "Va_in"
                        
                        position = left:1
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7768, 8120
                        size = 25, 25

                    ]
                    
                    port Vb_in {
                        label = "Vb_in"
                        
                        position = left:2
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7808, 8152
                        size = 25, 25

                    ]
                    
                    port Vc_in {
                        label = "Vc-in"
                        
                        position = left:3
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 7848, 8184
                        size = 25, 25

                    ]
                    
                    port Vt_out {
                        label = "Vt_out"
                        
                        position = right:2
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8528, 8024
                        size = 25, 25

                    ]
                    
                    port f {
                        label = "f"
                        
                        position = right:1
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8096, 8160
                        size = 25, 25

                    ]
                    
                    junction Junction63 sp
                    [
                        position = 8256, 8064
                        size = 0, 0

                    ]
                    connect Junction63 squaring.in1 as Connection1
                    
                    connect Sum2.out squareRoot.in as Connection2
                    
                    connect Sum2.in squaring.out as Connection3
                    
                    connect Sum2.in1 squaring1.out as Connection4
                    
                    connect Termination1.in "Voltage PLL.zero_axis" as Connection5
                    
                    connect Termination3.in "Voltage PLL.theta" as Connection6
                    
                    connect Termination4.in "Voltage PLL.sin_theta" as Connection7
                    
                    connect "Voltage PLL.va" Va_in as Connection9
                    
                    connect "Voltage PLL.vb" Vb_in as Connection10
                    
                    connect "Voltage PLL.vc" Vc_in as Connection11
                    
                    connect "Voltage PLL.freq" f as Connection17
                    
                    connect "Voltage PLL.d_axis" squaring.in as Connection12
                    
                    connect cte2.out Junction63 as Connection13
                    
                    connect squareRoot.out Vt_out as Connection14
                    
                    connect squaring1.in1 Junction63 as Connection15
                    
                    connect squaring1.in "Voltage PLL.q_axis" as Connection16
                    
                    

                    
                }
                [
                    position = 7920, 7568
                    rotation = down
                    size = 80, 64

                ]
                
                component Subsystem "PQ measure" {
                    layout = dynamic

                    
                    component gen_PQ_transform "PQ Power Meter1" {
                        
                        execution_rate = "-1"
            	    
                    }
                    [
                        position = 8192, 8192
                        scale = -1, 1

                    ]
                    
                    component gen_terminator Termination2 {
                        
            	    
                    }
                    [
                        position = 7992, 8208
                        scale = -1, 1

                    ]
                    
                    component gen_terminator Termination4 {
                        
            	    
                    }
                    [
                        position = 8104, 8248
                        scale = -1, 1

                    ]
                    
                    component gen_terminator Termination1 {
                        
            	    
                    }
                    [
                        position = 7936, 8184
                        scale = -1, 1

                    ]
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    port P_meas_out {
                        label = "P_meas_out"
                        
                        position = left:1
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8128, 8136
                        rotation = down
                        size = 25, 25

                    ]
                    
                    port Q_meas_out {
                        label = "Q_meas_out"
                        
                        position = left:2
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 8056, 8152
                        rotation = down
                        size = 25, 25

                    ]
                    
                    port Va_in {
                        label = "Va_in"
                        
                        position = right:1
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8272, 8048
                        rotation = down
                        size = 25, 25

                    ]
                    
                    port Vb_in {
                        label = "Vb_in"
                        
                        position = right:2
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8304, 8096
                        rotation = down
                        size = 25, 25

                    ]
                    
                    port Vc_in {
                        label = "Vc_in"
                        
                        position = right:4
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8360, 8144
                        rotation = down
                        size = 25, 25

                    ]
                    
                    port Ia_in {
                        label = "Ia_in"
                        
                        position = right:6
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8360, 8240
                        rotation = down
                        size = 25, 25

                    ]
                    
                    port Ib_in {
                        label = "Ib_in"
                        
                        position = right:7
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8312, 8280
                        rotation = down
                        size = 25, 25

                    ]
                    
                    port Ic_in {
                        label = "Ic_in"
                        
                        position = right:10
                        kind = sp
                        direction = out
                        sp_type {
                            default = auto
                            readonly = True
                        }
                    }
                    [
                        position = 8280, 8328
                        rotation = down
                        size = 25, 25

                    ]
                    
                    port S_meas_out {
                        label = "S_meas_out"
                        
                        position = left:3
                        kind = sp
                        direction = in
                        sp_type {
                            default = inherit
                            readonly = True
                        }
                    }
                    [
                        position = 7944, 8272
                        rotation = down
                        size = 25, 25

                    ]
                    connect "PQ Power Meter1.ia" Ia_in as Connection1
                    
                    connect "PQ Power Meter1.ib" Ib_in as Connection2
                    
                    connect "PQ Power Meter1.ic" Ic_in as Connection3
                    
                    connect "PQ Power Meter1.Pdc" P_meas_out as Connection4
                    
                    connect "PQ Power Meter1.Qdc" Q_meas_out as Connection5
                    
                    connect "PQ Power Meter1.va" Va_in as Connection6
                    
                    connect "PQ Power Meter1.vb" Vb_in as Connection7
                    
                    connect "PQ Power Meter1.vc" Vc_in as Connection8
                    
                    connect S_meas_out "PQ Power Meter1.apparent" as Connection9
                    
                    connect Termination1.in "PQ Power Meter1.Pac" as Connection10
                    
                    connect Termination2.in "PQ Power Meter1.Qac" as Connection11
                    
                    connect Termination4.in "PQ Power Meter1.k_factor" as Connection12
                    
                    

                    
                }
                [
                    position = 7832, 7736
                    size = 88, 152

                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                tag Goto2 {
                    value = "F1_GCB_VOLTAGE"
                    scope = global
                    kind = sp
                    direction = in
                }
                [
                    position = 7432, 7632
                    hide_name = True
                    scale = -1, 1

                ]
                
                tag Goto4 {
                    value = "F1_GCB_P_REACTIVE"
                    scope = global
                    kind = sp
                    direction = in
                }
                [
                    position = 7712, 7760
                    hide_name = True
                    scale = -1, 1

                ]
                
                tag Goto3 {
                    value = "F1_GCB_P_REAL"
                    scope = global
                    kind = sp
                    direction = in
                }
                [
                    position = 7712, 7712
                    hide_name = True
                    scale = -1, 1

                ]
                
                tag Goto5 {
                    value = "F1_GCB_FREQUENCY"
                    scope = global
                    kind = sp
                    direction = in
                }
                [
                    position = 7800, 7584
                    hide_name = True
                    scale = -1, 1

                ]
                
                tag Goto1 {
                    value = "F1_DIESEL_Vt"
                    scope = global
                    kind = sp
                    direction = in
                }
                [
                    position = 7432, 7608
                    hide_name = True
                    scale = -1, 1

                ]
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                
                port a {
                    label = "a"
                    
                    position = right:1
                    kind = pe
                }
                [
                    position = 9168, 7968
                    rotation = down

                ]
                
                port b {
                    label = "b"
                    
                    position = right:2
                    kind = pe
                }
                [
                    position = 9168, 8064
                    rotation = down

                ]
                
                port c {
                    label = "c"
                    
                    position = right:3
                    kind = pe
                }
                [
                    position = 9168, 8160
                    rotation = down

                ]
                
                port A {
                    label = "A"
                    
                    position = left:1
                    kind = pe
                }
                [
                    position = 6952, 7968

                ]
                
                port B {
                    label = "B"
                    
                    position = left:2
                    kind = pe
                }
                [
                    position = 6952, 8064

                ]
                
                port C {
                    label = "C"
                    
                    position = left:3
                    kind = pe
                }
                [
                    position = 6952, 8160

                ]
                
                port Vt_meas {
                    label = "Vt_meas"
                    
                    position = top:auto
                    kind = sp
                    direction = in
                    sp_type {
                        default = inherit
                        readonly = True
                    }
                }
                [
                    position = 7568, 7560
                    scale = -1, 1

                ]
                
                junction Junction11 pe
                [
                    position = 8104, 8416
                    size = 0, 0

                ]
                
                junction Junction19 pe
                [
                    position = 8040, 7968
                    size = 0, 0

                ]
                
                junction Junction20 pe
                [
                    position = 8104, 8064
                    size = 0, 0

                ]
                
                junction Junction21 pe
                [
                    position = 8168, 8160
                    size = 0, 0

                ]
                
                junction Junction23 sp
                [
                    position = 8008, 7696

                ]
                
                junction Junction24 sp
                [
                    position = 8072, 7712

                ]
                
                junction Junction25 sp
                [
                    position = 8136, 7728

                ]
                
                junction Junction1482 sp
                [
                    position = 7744, 7560

                ]
                
                junction Junction1483 sp
                [
                    position = 7496, 7608

                ]
                
                junction Junction1484 sp
                [
                    position = 7760, 7680

                ]
                
                junction Junction1485 sp
                [
                    position = 7760, 7736

                ]
                
                junction Junction1486 pe
                [
                    position = 8640, 7968

                ]
                
                junction Junction1488 pe
                [
                    position = 8784, 8160

                ]
                
                junction Junction1489 pe
                [
                    position = 8712, 8416

                ]
                
                junction Junction1490 pe
                [
                    position = 8712, 8064

                ]
                
                junction Junction1491 pe
                [
                    position = 8168, 8416

                ]
                
                junction Junction1492 pe
                [
                    position = 8640, 8416

                ]
                
                junction Junction1493 pe
                [
                    position = 8784, 8416

                ]
                
                junction Junction1494 pe
                [
                    position = 8856, 8416

                ]
                
                junction Junction1495 pe
                [
                    position = 8928, 8416

                ]
                
                junction Junction1496 pe
                [
                    position = 8856, 7968

                ]
                
                junction Junction1497 pe
                [
                    position = 8928, 8064

                ]
                
                junction Junction1498 pe
                [
                    position = 9000, 8160

                ]
                connect A Junction19 as Connection446
                
                connect B Junction20 as Connection445
                
                connect C1.p_node Junction1486 as Connection451
                
                connect C1.n_node R14.p_node as Connection448
                
                connect C2.p_node Junction1488 as Connection459
                
                connect C3.p_node Junction1490 as Connection468
                
                connect C3.n_node R15.p_node as Connection462
                
                connect "Calculate Vt.Va_in" Junction23 as Connection232
                
                connect "Calculate Vt.Vb_in" Junction24 as Connection235
                
                connect "Calculate Vt.Vc_in" Junction25 as Connection238
                
                connect Gain8.in Junction1485 as Connection434
                
                connect Gain9.in Junction1484 as Connection431
                
                connect Goto1 Junction1483 as Connection428
                
                connect Goto2 Junction1483 as Connection430
                
                connect Goto3 Junction1484 as Connection433
                
                connect Goto4 Junction1485 as Connection436
                
                connect Goto5 "Calculate Vt.f" as Connection437
                
                connect Ia.p_node Junction1486 as Connection449
                
                connect Ia.out "PQ measure.Ia_in" as Connection239
                
                connect Ib.n_node Junction20 as Connection63
                
                connect Ib.out "PQ measure.Ib_in" as Connection240
                
                connect Ic.p_node Junction1488 as Connection457
                
                connect Ic.n_node Junction21 as Connection69
                
                connect Ic.out "PQ measure.Ic_in" as Connection241
                
                connect Junction11 Junction1491 as Connection469
                
                connect Junction1482 "Calculate Vt.Vt_out" as Connection426
                
                connect Junction1483 normalize.out as Connection429
                
                connect Junction1484 "PQ measure.P_meas_out" as Connection432
                
                connect Junction1485 "PQ measure.Q_meas_out" as Connection435
                
                connect Junction1486 Junction1496 as Connection483
                
                connect Junction1488 Junction1498 as Connection489
                
                connect Junction1489 R15.n_node as Connection464
                
                connect Junction1490 Ib.p_node as Connection467
                
                connect Junction1491 Junction1492 as Connection473
                
                connect Junction1491 Vc.n_node as Connection470
                
                connect Junction1492 Junction1489 as Connection472
                
                connect Junction1493 Junction1489 as Connection475
                
                connect Junction1494 Junction1493 as Connection478
                
                connect Junction1495 Junction1494 as Connection481
                
                connect Junction1496 a as Connection484
                
                connect Junction1497 Junction1490 as Connection487
                
                connect Junction1498 c as Connection490
                
                connect Junction19 Ia.n_node as Connection128
                
                connect Junction19 Va.p_node as Connection129
                
                connect Junction20 Vb.p_node as Connection131
                
                connect Junction21 C as Connection447
                
                connect Junction21 Vc.p_node as Connection132
                
                connect Junction23 "PQ measure.Va_in" as Connection231
                
                connect Junction24 "PQ measure.Vb_in" as Connection234
                
                connect Junction25 "PQ measure.Vc_in" as Connection237
                
                connect "PQ measure.S_meas_out" Gain7.in as Connection157
                
                connect P_Gen1.in Gain9.out as Connection158
                
                connect Q_Gen1.in Gain8.out as Connection161
                
                connect R14.n_node Junction1492 as Connection471
                
                connect R16.p_node C2.n_node as Connection456
                
                connect R16.n_node Junction1493 as Connection474
                
                connect R20.n_node Junction1495 as Connection480
                
                connect R20.p_node Junction1497 as Connection488
                
                connect R21.n_node Junction1494 as Connection477
                
                connect R21.p_node Junction1496 as Connection485
                
                connect R22.n_node Junction1495 as Connection482
                
                connect R22.p_node Junction1498 as Connection491
                
                connect S_Gen1.in Gain7.out as Connection192
                
                connect Va.n_node Junction11 as Connection207
                
                connect Va.out Junction23 as Connection230
                
                connect Vb.n_node Junction11 as Connection209
                
                connect Vb.out Junction24 as Connection233
                
                connect Vc.out Junction25 as Connection236
                
                connect Vt_meas Junction1482 as Connection425
                
                connect b Junction1497 as Connection486
                
                connect normalize.in Junction1482 as Connection427
                
                

                
            }
            [
                position = 8232, 8504
                size = 112, 112

            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            tag Goto1 {
                value = "F1_GCB_BREAKER"
                scope = global
                kind = sp
                direction = in
            }
            [
                position = 8008, 8328
                hide_name = True

            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port A {
                
                position = top:3
                kind = pe
            }
            [
                position = 7480, 8408

            ]
            
            port C {
                
                position = top:1
                kind = pe
            }
            [
                position = 7480, 8600

            ]
            
            port B {
                
                position = top:2
                kind = pe
            }
            [
                position = 7480, 8504

            ]
            
            port "MCB Control" {
                
                position = auto:auto
                kind = sp
                direction = in
                sp_type {
                    default = inherit
                    readonly = True
                }
            }
            [
                position = 7928, 8136

            ]
            
            comment Comment1 START <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd"><html><head><meta name="qrichtext" content="1" /><style type="text/css">p, li { white-space: pre-wrap; }</style></head><body style=" font-family:'Arial'; font-size:12pt; font-weight:400; font-style:normal;"><p style=" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px;">1. File name: Mach_exc_gov......updated_starter_v2.tse</p></body></html> ENDCOMMENT 
            [
                position = 7768, 7752

            ]
            
            junction Junction109 pe
            [
                position = 8752, 8400
                size = 0, 0

            ]
            
            junction Junction110 pe
            [
                position = 8752, 8568
                size = 0, 0

            ]
            
            junction Junction112 pe
            [
                position = 8760, 8648

            ]
            
            junction Junction113 pe
            [
                position = 8760, 8568

            ]
            
            junction Junction115 sp
            [
                position = 8320, 8056

            ]
            
            junction Junction116 sp
            [
                position = 7928, 8328

            ]
            
            junction Junction117 pe
            [
                position = 8120, 8408

            ]
            connect A DIESEL_GCB.a_in as Connection550
            
            connect CB_control.CB_status Governor_and_Diesel_Engine.Contactor_status as Connection2681
            
            connect CB_control.GCB_control Junction116 as Connection2682
            
            connect CB_control.MCB_control "MCB Control" as Connection557
            
            connect "Close GCB.out" CB_control.Close_GCB as Connection7
            
            connect "Close MCB.out" CB_control.Close_MCB as Connection8
            
            connect "Core Marker1.node" Junction117 as Connection2687
            
            connect DIESEL_GCB.b_in B as Connection552
            
            connect DIESEL_GCB.c_in C as Connection551
            
            connect DIESEL_GCB.c_out DIESEL_GCB_Measurements.C as Connection549
            
            connect DIESEL_GCB.b_out DIESEL_GCB_Measurements.B as Connection548
            
            connect DIESEL_GCB.a_out Junction117 as Connection2685
            
            connect DIESEL_GCB_Measurements.Vt_meas Exciter.Vt_in as Connection2646
            
            connect Exciter.Fuel_off Junction115 as Connection2678
            
            connect Exciter.Vf_out Vfd.in as Connection564
            
            connect "Fuel signal off.out" "Subsystem1.Fuel Signal OFF" as Connection133
            
            connect Goto1 Junction116 as Connection2684
            
            connect Governor_and_Diesel_Engine.reset_integrator Junction115 as Connection2680
            
            connect Governor_and_Diesel_Engine.T_out NG_Gen.load_in as Connection2670
            
            connect Junction109 If.n_node as Connection78
            
            connect Junction109 NG_Gen.r_1 as Connection77
            
            connect Junction110 NG_Gen.r_2 as Connection81
            
            connect Junction112 R66.p_node as Connection2639
            
            connect Junction113 Junction110 as Connection2641
            
            connect Junction113 Junction112 as Connection2645
            
            connect Junction115 Subsystem1.Reset as Connection2679
            
            connect Junction116 DIESEL_GCB.ctrl_in as Connection2683
            
            connect Junction117 DIESEL_GCB_Measurements.A as Connection2686
            
            connect NG_Gen.b_in DIESEL_GCB_Measurements.b as Connection318
            
            connect NG_Gen.c_in DIESEL_GCB_Measurements.c as Connection323
            
            connect NG_Gen.a_in DIESEL_GCB_Measurements.a as Connection324
            
            connect NG_Gen.torque_out "Electrical Torque.in" as Connection2693
            
            connect NG_Gen.speed_out Governor_and_Diesel_Engine.w_meas_in as Connection2692
            
            connect "Open GCB.out" CB_control.Open_GCB as Connection555
            
            connect "Open MCB.out" CB_control.Open_MCB as Connection79
            
            connect P_control_loop.Delta_w_out Governor_and_Diesel_Engine.Delta_w_in as Connection2669
            
            connect Q_control_loop.Delta_V_out Exciter.Delta_V_in as Connection568
            
            connect Starter.out Subsystem1.Starter as Connection132
            
            connect V_noise_immunity.p_node Junction112 as Connection2638
            
            connect V_noise_immunity.n_node R66.n_node as Connection2636
            
            connect Vfd.p_node If.p_node as Connection212
            
            connect Vfd.n_node Junction113 as Connection2640
            
            connect Vfield.p_node Junction109 as Connection214
            
            connect Vfield.n_node Junction110 as Connection215
            
            

            
        }
        [
            position = 6896, 9192
            scale = -1, 1
            size = 168, 136

        ]
        
        component Subsystem DIESEL_MCB {
            layout = dynamic

            
            component pas_resistor R64 {
                
                resistance = "1e5"
    	    
            }
            [
                position = 8304, 8096
                rotation = down

            ]
            
            component gen_probe VB_grid2rms {
                
    	    
            }
            [
                position = 8792, 7848

            ]
            
            component pas_resistor R59 {
                
                resistance = "4761.0"
    	    
            }
            [
                position = 8336, 8664
                rotation = down

            ]
            
            component pas_resistor R65 {
                
                resistance = "1e5"
    	    
            }
            [
                position = 8304, 8160
                rotation = down

            ]
            
            component pas_resistor R61 {
                
                resistance = "4761.0"
    	    
            }
            [
                position = 8336, 8720
                rotation = down

            ]
            
            component gen_rms_value "RMS value1" {
                
    	    
            }
            [
                position = 8696, 7792

            ]
            
            component gen_probe VC_grid2rms {
                
    	    
            }
            [
                position = 8792, 7904

            ]
            
            component gen_probe VA_grid2rms {
                
    	    
            }
            [
                position = 8792, 7792

            ]
            
            component gen_rms_value "RMS value2" {
                
    	    
            }
            [
                position = 8696, 7848

            ]
            
            component pas_resistor R63 {
                
                resistance = "1e5"
    	    
            }
            [
                position = 8304, 8216
                rotation = down

            ]
            
            component gen_rms_value "RMS value3" {
                
    	    
            }
            [
                position = 8696, 7904

            ]
            
            component pas_resistor R62 {
                
                resistance = "4761.0"
    	    
            }
            [
                position = 8336, 8600
                rotation = down

            ]
            component "core/Voltage Measurement" VB_grid_2 {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
            }
            [
                position = 8464, 8008
                rotation = down
                scale = -1, -1

            ]
            
            component "core/Current Measurement" Ic_grid {
                
                addr = "537"
                execution_rate = "Ts"
            }
            [
                position = 8224, 7752
                rotation = left

            ]
            
            component "core/Current Measurement" IB_MCB {
                
                addr = "290"
                execution_rate = "Ts"
                frequency = "10000.0"
            }
            [
                position = 8128, 8512
                rotation = left

            ]
            
            component "core/Voltage Measurement" VA_grid_2 {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
            }
            [
                position = 8336, 7952

            ]
            
            component "core/Current Measurement" Ia_grid {
                
                addr = "533"
                execution_rate = "Ts"
            }
            [
                position = 8032, 7672
                rotation = left

            ]
            
            component "core/Current Measurement" IA_MCB {
                
                addr = "288"
                execution_rate = "Ts"
                frequency = "10000.0"
            }
            [
                position = 8032, 8512
                rotation = left

            ]
            
            component "core/Voltage Measurement" VA_busbar {
                
                addr = "267"
                execution_rate = "Ts"
            }
            [
                position = 8336, 8776
                rotation = down
                scale = -1, 1

            ]
            
            component "core/Current Measurement" IC_MCB {
                
                addr = "291"
                execution_rate = "Ts"
                frequency = "10000.0"
            }
            [
                position = 8224, 8512
                rotation = left

            ]
            
            component "core/Current Measurement" Ib_grid {
                
                addr = "535"
                execution_rate = "Ts"
            }
            [
                position = 8128, 7712
                rotation = left

            ]
            
            component "core/Voltage Measurement" VC_grid_2 {
                
                addr = "267"
                execution_rate = "Ts"
                sig_output = "True"
            }
            [
                position = 8608, 8064
                rotation = down
                scale = -1, -1

            ]
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            port b {
                
                position = bottom:2
                kind = pe
                direction = out
            }
            [
                position = 8128, 8864
                rotation = left

            ]
            
            port a {
                
                position = bottom:1
                kind = pe
                direction = out
            }
            [
                position = 8032, 8864
                rotation = left

            ]
            
            port B {
                
                position = top:2
                kind = pe
                direction = out
            }
            [
                position = 8128, 7584
                rotation = right

            ]
            
            port c {
                
                position = bottom:3
                kind = pe
                direction = out
            }
            [
                position = 8224, 8864
                rotation = left

            ]
            
            port A {
                
                position = top:1
                kind = pe
                direction = out
            }
            [
                position = 8032, 7584
                rotation = right

            ]
            
            port C {
                
                position = top:3
                kind = pe
                direction = out
            }
            [
                position = 8224, 7584
                rotation = right

            ]
            
            junction Junction2 pe
            [
                position = 8440, 8664

            ]
            
            junction Junction3 pe
            [
                position = 8128, 8664

            ]
            
            junction Junction4 pe
            [
                position = 8032, 8720

            ]
            
            junction Junction5 pe
            [
                position = 8224, 8600

            ]
            
            junction Junction6 pe
            [
                position = 8032, 8776

            ]
            
            junction Junction7 pe
            [
                position = 8440, 8720

            ]
            
            junction Junction11 pe
            [
                position = 8128, 8008

            ]
            
            junction Junction12 pe
            [
                position = 8224, 8064

            ]
            
            junction Junction19 pe
            [
                position = 8032, 7952

            ]
            
            junction Junction20 pe
            [
                position = 8688, 8008

            ]
            
            junction Junction21 pe
            [
                position = 8688, 8064

            ]
            
            junction Junction25 pe
            [
                position = 8440, 8096

            ]
            
            junction Junction26 pe
            [
                position = 8440, 8160

            ]
            
            junction Junction27 pe
            [
                position = 8032, 8216

            ]
            
            junction Junction28 pe
            [
                position = 8128, 8160

            ]
            
            junction Junction29 pe
            [
                position = 8224, 8096

            ]
            connect A Ia_grid.n_node as Connection2689
            
            connect B Ib_grid.n_node as Connection2691
            
            connect IA_MCB.n_node Junction27 as Connection2741
            
            connect IB_MCB.n_node Junction28 as Connection2744
            
            connect IC_MCB.n_node Junction29 as Connection2747
            
            connect Ib_grid.p_node Junction11 as Connection2692
            
            connect Ic_grid.n_node C as Connection2694
            
            connect Junction11 Junction28 as Connection2742
            
            connect Junction12 Ic_grid.p_node as Connection2693
            
            connect Junction19 Ia_grid.p_node as Connection2698
            
            connect Junction19 Junction27 as Connection2739
            
            connect Junction2 R59.p_node as Connection2622
            
            connect Junction20 Junction21 as Connection2709
            
            connect Junction20 VB_grid_2.n_node as Connection2701
            
            connect Junction21 VC_grid_2.n_node as Connection2710
            
            connect Junction25 Junction21 as Connection2734
            
            connect Junction26 Junction25 as Connection2723
            
            connect Junction27 R63.n_node as Connection2740
            
            connect Junction28 R65.n_node as Connection2743
            
            connect Junction29 Junction12 as Connection2746
            
            connect Junction3 IB_MCB.p_node as Connection2625
            
            connect Junction4 IA_MCB.p_node as Connection2628
            
            connect Junction5 IC_MCB.p_node as Connection2631
            
            connect Junction6 Junction4 as Connection2639
            
            connect Junction7 Junction2 as Connection2642
            
            connect R59.n_node Junction3 as Connection2626
            
            connect R61.n_node Junction4 as Connection2629
            
            connect R61.p_node Junction7 as Connection2641
            
            connect R62.p_node Junction2 as Connection2735
            
            connect R62.n_node Junction5 as Connection2632
            
            connect R63.p_node Junction26 as Connection2724
            
            connect R64.p_node Junction25 as Connection2719
            
            connect R64.n_node Junction29 as Connection2745
            
            connect R65.p_node Junction26 as Connection2722
            
            connect "RMS value1.in" VA_grid_2.out as Connection2688
            
            connect "RMS value2.in" VB_grid_2.out as Connection2687
            
            connect "RMS value3.in" VC_grid_2.out as Connection2686
            
            connect VA_busbar.p_node Junction6 as Connection2640
            
            connect VA_busbar.n_node Junction7 as Connection2643
            
            connect VA_grid2rms.in "RMS value1.out" as Connection111
            
            connect VA_grid_2.p_node Junction19 as Connection2699
            
            connect VA_grid_2.n_node Junction20 as Connection2702
            
            connect VB_grid2rms.in "RMS value2.out" as Connection117
            
            connect VB_grid_2.p_node Junction11 as Connection2656
            
            connect VC_grid2rms.in "RMS value3.out" as Connection122
            
            connect VC_grid_2.p_node Junction12 as Connection2660
            
            connect a Junction6 as Connection2638
            
            connect b Junction3 as Connection2624
            
            connect c Junction5 as Connection2630
            
            

            
        }
        [
            position = 6896, 9000
            size = 72, 72

        ]
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        tag Tag36 {
            value = "Ground"
            scope = global
            kind = pe
        }
        [
            position = 6488, 6744
            hide_name = True
            scale = -1, 1

        ]
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        junction Junction506 pe
        [
            position = 6392, 6744

        ]
        
        junction Junction512 pe
        [
            position = 6376, 8216

        ]
        
        junction Junction513 pe
        [
            position = 6392, 8120

        ]
        
        junction Junction514 pe
        [
            position = 6408, 8056

        ]
        
        junction Junction515 pe
        [
            position = 6296, 6936

        ]
        
        junction Junction516 pe
        [
            position = 5376, 6864

        ]
        
        junction Junction517 pe
        [
            position = 5376, 7048

        ]
        
        junction Junction518 pe
        [
            position = 5392, 7264

        ]
        
        junction Junction519 pe
        [
            position = 5288, 7232

        ]
        
        junction Junction520 pe
        [
            position = 5392, 7264

        ]
        
        junction Junction521 pe
        [
            position = 5368, 7048

        ]
        connect DIESEL_MCB.b "DIESEL GENSET1.B" as Connection4976
        
        connect DIESEL_MCB.c "DIESEL GENSET1.C" as Connection4977
        
        connect DIESEL_MCB.a "DIESEL GENSET1.A" as Connection4978
        
        connect DIESEL_MCB.C F1_line2.c_in as Connection4973
        
        connect DIESEL_MCB.A F1_line2.a_in as Connection4975
        
        connect "Device Marker1.node" Junction519 as Connection4992
        
        connect "Device Marker4.node" Junction515 as Connection4966
        
        connect F1_line.b_in MS.B as Connection4873
        
        connect F1_line.a_in MS.A as Connection4875
        
        connect F1_line.b_out Vs1.b_node as Connection4642
        
        connect F1_line.c_out Vs1.c_node as Connection4871
        [
                    breakpoints =6408, 6936;6488, 6936;6488, 6936

        ]
        connect F1_line1.a_in Junction512 as Connection4950
        
        connect F1_line1.b_in Junction513 as Connection4953
        [
                    breakpoints =6392, 8080;6392, 8096

        ]
        connect F1_line1.c_in Junction514 as Connection4956
        
        connect F1_line1.c_out S1.a_out as Connection4841
        
        connect F1_line1.a_out S1.c_out as Connection4842
        
        connect F1_line2.b_in DIESEL_MCB.B as Connection4974
        
        connect F1_line2.c_out GEN_MS.C as Connection4971
        
        connect F1_line3.a_in GEN_MS.a as Connection4967
        
        connect F1_line3.c_in GEN_MS.c as Connection4969
        
        connect GEN_MS.B F1_line2.b_out as Connection4970
        
        connect GEN_MS.A F1_line2.a_out as Connection4972
        
        connect GEN_MS.b F1_line3.b_in as Connection4968
        
        connect Junction506 Vs1.n_node as Connection4583
        
        connect Junction512 F1_line3.a_out as Connection4951
        
        connect Junction513 F1_line3.b_out as Connection4954
        [
                    breakpoints =6392, 8120;6392, 8120;6392, 8120;6400, 8120;6896, 8120

        ]
        connect Junction514 F1_line3.c_out as Connection4957
        [
                    breakpoints =6408, 8056;6408, 8056;6488, 8072;6488, 8088;6504, 8088

        ]
        connect Junction515 F1_line.a_out as Connection4965
        [
                    breakpoints =6296, 6936;6296, 6936;6296, 6936;6296, 6936;6296, 6936;6296, 6936;6376, 6936;6376, 6952;6376, 6952;6376, 6992

        ]
        connect Junction516 Vs2.b_node as Connection4985
        
        connect Junction519 Vs4.a_node as Connection4993
        
        connect Junction520 Junction518 as Connection4997
        
        connect Junction521 Junction517 as Connection5000
        
        connect MS.C F1_line.c_in as Connection4874
        
        connect MS.a S1.c_in as Connection4876
        
        connect MS.b S1.b_in as Connection4877
        
        connect MS.c S1.a_in as Connection4878
        
        connect R1.n_node Junction516 as Connection4984
        
        connect R1.p_node Vs2.a_node as Connection4982
        
        connect R2.p_node Junction516 as Connection4986
        
        connect R2.n_node Vs2.c_node as Connection4987
        
        connect R3.n_node Junction517 as Connection4989
        
        connect R3.p_node Vs3.a_node as Connection5002
        
        connect R4.p_node Junction521 as Connection4999
        
        connect R4.n_node Vs3.c_node as Connection5003
        [
                    breakpoints =5472, 7016

        ]
        connect R5.n_node Junction518 as Connection4991
        
        connect R5.p_node Junction519 as Connection4994
        
        connect R6.p_node Junction520 as Connection4996
        
        connect R6.n_node Vs4.c_node as Connection4995
        
        connect S1.b_out F1_line1.b_out as Connection4840
        
        connect Step_Load.A Junction512 as Connection4952
        
        connect Step_Load.B Junction513 as Connection4955
        
        connect Step_Load.C Junction514 as Connection4958
        
        connect Tag36 Junction506 as Connection4584
        
        connect Vs1.a_node Junction515 as Connection4964
        
        connect Vs2.a_node "Device Marker2.node" as Connection4831
        [
                    breakpoints =5280, 6872;5128, 6872

        ]
        connect Vs2.n_node gnd5.node as Connection4979
        
        connect Vs3.a_node "Device Marker3.node" as Connection4832
        [
                    breakpoints =5280, 7056;5128, 7056

        ]
        connect Vs3.b_node Junction521 as Connection5001
        
        connect Vs3.n_node gnd4.node as Connection4980
        
        connect Vs4.b_node Junction520 as Connection4998
        
        connect Vs4.n_node gnd3.node as Connection4981
        
        connect gnd2.node Junction506 as Connection4582
        
        

        
    }

    
    
    default {
        
        gen_DC1A_exciter {
            Tr = "0.020"
            Tb = "0"
            Tc = "0"
            Ka = "300"
            Ta = "0.001"
            VRmax = "11.5"
            VRmin = "-11.5"
            Te = "0.1"
            Ke = "1"
            Kf = "0.001"
            Tf = "0.1"
            initial_terminal_voltage = "0"
            initial_field_voltage = "0"
            disable_Vt_transducer = "True"
            disable_fdbck_stab = "True"
            start_time = "10"
            execution_rate = "inherit"
        }
        
        gen_PQ_transform {
            filter_order = "first order"
            filter_cutoff_Hz = "30"
            initial_filter_input = "0"
            initial_filter_output = "0"
            execution_rate = "inherit"
        }
        
        gen_bus_join {
            inputs = "2"
            execution_rate = "inherit"
        }
        
        gen_bus_split {
            outputs = "2"
            execution_rate = "inherit"
        }
        
        gen_digital_probe {
            override_signal_name = "False"
            signal_name = ""
            addr = "0"
            execution_rate = "inherit"
        }
        
        gen_gain {
            gain = "1"
            multiplication = "Element-wise(K.*u)"
            execution_rate = "inherit"
        }
        
        gen_integrator {
            show_reset = "none"
            show_init_condition = "internal"
            init_value = "0"
            limit_output = "False"
            limit_upper = "inf"
            limit_lower = "-inf"
            show_state = "False"
            state_port_type = "inherit"
            execution_rate = "inherit"
        }
        
        gen_logic_op {
            operator = "AND"
            inputs = "2"
            execution_rate = "inherit"
        }
        
        gen_math_fnc {
            mathematical_fn = "exponential"
            execution_rate = "inherit"
        }
        
        gen_pid_controller {
            controller_type = "PID"
            kp = "1"
            ki = "1"
            kd = "0"
            filt_coef = "100"
            int_init_value = "0"
            filt_init_value = "0"
            enb_output_limit_out = "False"
            upper_sat_lim = "1"
            lower_sat_lim = "-1"
            enb_anti_windup_out = "False"
            signal_out_type = "inherit"
            execution_rate = "inherit"
        }
        
        gen_pll_three_phs {
            initial_filter_output = "60"
            wn = "157.0796"
            zeta = "0.707"
            initial_rt_lim_output = "60"
            rate_high = "12"
            rate_low = "-12"
            initial_pid_output = "376.99111843"
            kp = "100"
            ki = "3200"
            kd = "1"
            N = "714.2857"
            wn_LPFdq = "62.83185307"
            execution_rate = "inherit"
        }
        
        gen_probe {
            addr = "0"
            override_signal_name = "False"
            signal_name = ""
            signal_type = "generic"
            execution_rate = "inherit"
        }
        
        gen_product {
            signs = "2"
            execution_rate = "inherit"
        }
        
        gen_rms_value {
            op_mode = "PLL based"
            frequency = "50"
            period_timeout = "0.5"
            execution_rate = "inherit"
        }
        
        gen_sr_ff {
            init_value = "0"
            execution_rate = "inherit"
        }
        
        gen_sum {
            signs = "2"
            execution_rate = "inherit"
        }
        
        gen_terminator {
            execution_rate = "inherit"
        }
        
        gen_transport_delay {
            time_delay = "0.1"
            init_value = "0"
            signal_out_type = "inherit"
            execution_rate = "inherit"
        }
        
        gen_z_domain_transfer {
            domain = "Z-domain"
            method = "Zero-order hold"
            b_coeff = "[1]"
            a_coeff = "[1,-1]"
            init_states = "0"
            signal_out_type = "inherit"
            execution_rate = "inherit"
        }
        
        pas_capacitor {
            capacitance = "1e-6"
            initial_voltage = "0"
            pole_shift_ignore = "False"
            visible = "True"
        }
        
        pas_inductor {
            inductance = "1e-3"
            initial_current = "0.0"
            pole_shift_ignore = "False"
            visible = "True"
        }
        
        pas_resistor {
            resistance = "1"
        }
        
        src_constant {
            value = "1"
            signal_type = "real"
            execution_rate = "100e-6"
        }
        
        src_digital_input {
            addr = "1"
            invert = "false"
            signal_type = "uint"
            execution_rate = "100e-6"
        }
        
        src_scada_input {
            addr = "0"
            format = "real"
            override_signal_name = "False"
            signal_name = ""
            signal_type = "real"
            min = "-1e6"
            max = "1e6"
            def_value = "0"
            unit = " "
            execution_rate = "100e-6"
        }
        
        src_voltage {
            sig_input = "False"
            type = "signal generator"
            param_set = ""
            parent_label = ""
            addr = "0"
            spc_nb = "0"
            execution_rate = "100e-6"
            cpd_visible = "True"
        }
        
        sys_hil_marker {
            hil_device_id = "0"
            override_hw_settings = "False"
            hw_configuration_id = "1"
            override_sim_settings = "False"
            sim_method = "exact"
            sim_step = "auto"
            ss_calc_method = "systematic elimination"
            enb_pole_shift = "True"
            enb_gds_oversampling = "True"
            show_modes = "False"
            cpl_stb = "False"
            enb_dep_sw_detect = "False"
            override_user_sp_settings = "False"
            user_cpu_optimization_level = "high"
            code_section = "Internal Memory"
            data_section = "Internal Memory"
            override_sys_sp_settings = "False"
            system_cpu_optimization_level = "high"
            sys_sp_rate_1 = "100e-6"
            sys_sp_rate_2 = "50e-3"
        }
        
        sys_signal_switch {
            criterion = "ctrl >= threshold"
            threshold = "0"
            execution_rate = "inherit"
        }
        
        sys_spc_marker {
            marker_id = "id0"
        }
        
        "core/Signal Controlled Voltage Source" {
            execution_rate = "inherit"
        }
        
        "core/Synchronous Machine with Wound Rotor" {
            Rs = "1.62"
            Lls = "0.004527"
            Lmd = "0.1086"
            Lmq = "0.1086"
            Rf = "1.208"
            Llfd = "0.01132"
            Rkd = "3.142"
            Rkq = "4.772"
            Llkd = "0.007334"
            Llkq = "0.01015"
            Ns_div_Nfd = "1.0"
            Ns_div_Nkd = "1.0"
            Ns_div_Nkq = "1.0"
            pms = "2"
            star_delta = "star"
            Jm = "0.0923"
            friction_coeff = "0"
            unconstrained_angle = "disabled"
            load_src = "SCADA / external"
            ext_mdl_load_type = "torque"
            load_ai_pin_addr = "1"
            load_ai_offset = "0"
            load_ai_gain = "1"
            enc_ppr = "1024"
            res_pole_pairs = "1"
            res_carr_source = "internal"
            res_int_carr_f = "5e+3"
            res_ai_pin_addr = "1"
            res_ai_offset = "0"
            res_ai_gain = "1"
            theta_ab = "-pi/2"
            Rsnb_rotor = "inf"
            Rsnb_stator = "inf"
            enb_sig_out = "False"
            execution_rate = "100e-6"
            machine_id = "0"
            me_speed_out_addr = "0"
            el_torque_out_addr = "0"
            me_angle_out_addr = "0"
        }
        
        "core/Triple Pole Single Throw Contactor" {
            ctrl_src = "Digital input"
            Sa = "1"
            Sa_logic = "active high"
            execution_rate = "inherit"
            on_delay = "0"
            off_delay = "0"
            initial_state = "off"
        }
        
        "core/Externally Controlled Voltage Source" {
            ai_pin_addr = "1"
            ai_offset = "0.0"
            ai_gain = "1.0"
            visible = "True"
        }
        
        "core/Voltage Measurement" {
            bw_limit = "False"
            frequency = "10e3"
            comparator_enable = "False"
            operator = "greater"
            threshold = "0"
            cmp_abs_value = "False"
            feed_forward = "false"
            sig_output = "False"
            execution_rate = "100e-6"
            addr = "0"
            nd_msr_estimation = "false"
            dev_cpl_msr = "false"
            host_device = "0"
            output_to_device = "0"
            dev_cpl_index = "0"
            dev_cpl_var_nb = "0"
            visible = "True"
            override_signal_name = "False"
            signal_name = ""
        }
        
        "core/Current Measurement" {
            bw_limit = "False"
            frequency = "10e3"
            comparator_enable = "False"
            operator = "greater"
            threshold = "0"
            cmp_abs_value = "False"
            feed_forward = "false"
            sig_output = "False"
            execution_rate = "100e-6"
            addr = "0"
            nd_msr_estimation = "false"
            dev_cpl_msr = "false"
            host_device = "0"
            output_to_device = "0"
            dev_cpl_index = "0"
            dev_cpl_var_nb = "0"
            visible = "True"
            override_signal_name = "False"
            signal_name = ""
        }
        
        "core/Transmission Line" {
            model = "RL coupled"
            num_of_phases = "3"
            model_def = "Geometry"
            unit_sys = "imperial"
            Length_metric = "100.0"
            Length_miles = "62.1371"
            Frequency = "60.0"
            Earth_resistivity = "100"
            X_axis_1_metric = "-1.0668"
            Y_axis_1_metric = "8.5344"
            GMR_1_metric = "0.00743712"
            RD_1_metric = "0.009156192"
            Rs_1_metric = "0.19013958482462417"
            X_axis_1_imperial = "-3.5"
            Y_axis_1_imperial = "28.0"
            GMR_1_imperial = "0.0244"
            RD_1_imperial = "0.03004"
            Rs_1_imperial = "0.306"
            X_axis_2_metric = "-0.3048"
            Y_axis_2_metric = "8.5344"
            GMR_2_metric = "0.00743712"
            RD_2_metric = "0.009156192"
            Rs_2_metric = "0.19013958482462417"
            X_axis_2_imperial = "-1.0"
            Y_axis_2_imperial = "28.0"
            GMR_2_imperial = "0.0244"
            RD_2_imperial = "0.03004"
            Rs_2_imperial = "0.306"
            X_axis_3_metric = "1.0668"
            Y_axis_3_metric = "8.5344"
            GMR_3_metric = "0.00743712"
            RD_3_metric = "0.009156192"
            Rs_3_metric = "0.19013958482462417"
            X_axis_3_imperial = "3.5"
            Y_axis_3_imperial = "28.0"
            GMR_3_imperial = "0.0244"
            RD_3_imperial = "0.03004"
            Rs_3_imperial = "0.306"
            X_axis_4_metric = "0.1524"
            Y_axis_4_metric = "7.3152"
            GMR_4_metric = "0.00248"
            RD_4_metric = "0.00714"
            Rs_4_metric = "0.3678"
            X_axis_4_imperial = "0.5"
            Y_axis_4_imperial = "24.0"
            GMR_4_imperial = "0.00814"
            RD_4_imperial = "0.02345"
            Rs_4_imperial = "0.592"
            R_metric = "[[0.2481, 0.0579, 0.0579], [0.0579, 0.2481, 0.0579], [0.0579, 0.0579, 0.2481]]"
            R_imperial = "[[0.4, 0.093, 0.093], [0.093, 0.4, 0.093], [0.093, 0.093, 0.4]]"
            L_metric = "[[0.00233, 0.00140, 0.00140], [0.00140, 0.00233, 0.00140], [0.00140, 0.00140, 0.00233]]"
            L_imperial = "[[0.00374, 0.0022, 0.0022], [0.0022, 0.00374, 0.0022], [0.0022, 0.0022, 0.00374]]"
            C_metric = "[[8.546e-9, 0, 0], [0, 8.546e-9, 0], [0, 0, 8.546e-9]]"
            C_imperial = "[[1.471e-8, 0, 0], [0, 1.530e-8, 0], [0, 0, 1.375e-8]]"
            R_sequence_metric = "[[0.3864, 0, 0],[0, 0.01273, 0], [0, 0, 0.01273]]"
            L_sequence_metric = "[[4.1264e-3, 0, 0],[0, 0.9337e-3, 0], [0, 0, 0.9337e-3]]"
            C_sequence_metric = "[[7.751e-9, 0, 0],[0, 12.74e-9, 0], [0, 0, 12.74e-9]]"
            R_sequence_imperial = "[[0.6218, 0, 0],[0, 0.0204, 0], [0, 0, 0.0204]]"
            L_sequence_imperial = "[[0.00664, 0, 0],[0, 0.00150, 0], [0, 0, 0.00150]]"
            C_sequence_imperial = "[[1.247e-8, 0, 0],[0, 2.0503e-8, 0], [0, 0, 2.0503e-8]]"
            import_from_geometry = "Import from Geometry"
            import_from_RLC = "Import from RLC"
        }
    }

    CODE model_init
        # Numpy module is imported as 'np'
        # Scipy module is imported as 'sp'
        
        # ***** SYSTEM PARAMETERS *****
        sys_f = 60.0    # Hz
        sys_w = 2.0*np.pi*sys_f    #rad/s
        Ts = 100e-6
        
        import xfr_processing
        import cbl_processing
        import relay_settings_processing
        
        cbl_specs = cbl_processing.cbl_processing(sys_f)
        xfr_specs = xfr_processing.xfr_processing(sys_f)
        relay_params = relay_settings_processing.relay_settings_processing()
        
        
        
        
        # ***** MODBUS CONFIGURATIONS *****
        
        ip_201 = {                                                   
          'port': 502,                                                    
          'ip_addr': '192.168.10.201',                                     
          'netmask': '255.255.255.0',                                     
          'slave_id': 201,                                                 
          'coil_input_addresses': '',                                     
          'coil_output_addresses': '',                                    
          'discrete_input_addresses': '',                                 
          'holding_register_input_addresses': '',                         
          'holding_register_output_addresses': '2000,2001,2002',          
          'input_register_adresses': '0,1,2,3,4,5,6,7,8,9,10,11,12,13,14' 
        }                                                                 
        
        
        
        
        # Diesel Genset settings
        
        Ts_gen = Ts # 1e-3
        
            # Governor specs
        
        K = 10/1.75 # gain K
        T1 = 1.0E-4 # Time constant T1 of Electric Control Box
        T2 = 0.0 # Time constant T2 of Electric Control Box
        T3 = 0.5001 # Time constant T3 of Electric Control Box
        T4 = 0.025  # Time constant T4 of Actuator
        T5 = 0.0009  # Time constant T5 of Actuator
        T6 = 0.00574  # Time constant T6 of Actuator
        Pm0 = 0.0 #0.0005  # Initial value of Mechanic Power
        Tmax = 2 #10  # Max torque limit
        Tmin = 0 #-0.1  # Min torque limit
        Td = 0.024  # Engine time delay
        
        dummy = 1.0 + 2.0*T5/Ts
        coeff1 = (1.0 + 2.0*T4/Ts)/dummy
        coeff2 = (1.0 - 2.0*T4/Ts)/dummy
        coeff3 = 1.0
        coeff4 = (1.0 - 2.0*T5/Ts)/dummy
        numTF4d = [coeff1, coeff2]
        denTF4d = [coeff3, coeff4]
        
        dummy = 1.0 + 2.0*T6/Ts
        coeff1 = (1.0)/dummy
        coeff2 = (1.0)/dummy
        coeff3 = 1.0
        coeff4 = (1.0 - 2.0*T6/Ts)/dummy
        numTF3d = [coeff1, coeff2]
        denTF3d = [coeff3, coeff4]
        
        numTF1d = [(1.0+2.0*T3/Ts),2.0,(1.0-2.0*T3/Ts)]
        denTF1d = [(1.0+2.0*T1/Ts+4.0*T1*T2/(Ts**2)),(2.0-8.0*T1*T2/(Ts**2)),(4.0*T1*T2/(Ts**2)-2.0*T1/Ts+1)]
        
            # Synchronous machine specs from Simulink's 4 MVA machine in PU
        
        f = 60.0  # Synchronous speed
        pms = 2.0  # Number of mechanical pole pairs
        Sb_gen1 = 3.5e6  # Nominal/base power of machine in VA
        Vn_gen1 = 13800.0  # Machine terminal line to line rms voltage
        Rs_pu_gen1 = 0.008979  # Stator resistance per phase in pu
        Lls_pu_gen1 = 0.05  # Stator leakage inductance in pu
        Lmd_pu_gen1 = 2.35  # Direct-axis magnetizing inductance in pu
        Lmq_pu_gen1 = 1.72  # Quadrature-axis magnetizing inductance in pu
        Rf_pu_gen1 = 0.00206  # Field resistance in pu
        Llfd_pu_gen1 = 0.511  # Field leakage inductance in pu
        Rkd_pu_gen1 = 0.2826  # D-axis resistance in pu
        Rkq_pu_gen1 = 0.02545  # Q-axis resistance in pu
        Llkd_pu_gen1 = 3.738  # D-axis leakage inductance in pu
        Llkq_pu_gen1 = 0.2392  # Q-axis leakage inductance in pu
        Ns_fd_gen1 = 1.0  # Turn ratio between the stator and the field windings
        Ns_kd_gen1 = 1.0  # Turn ratio between stator and d-axis damper windings
        Ns_kq_gen1 = 1.0  # Turn ratio between stator and q-axis damper windings
        H_gen1 = 0.3468*6.7  # Inertia coefficient in seconds
        Fpu_gen1 = 0.009238  # Friction factor in pu
        
            # Base calculation
        
        Vb_gen1 = Vn_gen1*((2.0/3.0)**0.5)  # Nominal/base voltage of machine terminal in V (Peak line to neutral voltage)
        wb_gen1 = 2.0*np.pi*f  # Electrical angular speed base
        wmb_gen1 = wb_gen1/pms  # Mechanical angular speed base
        Zb_gen1 = (Vn_gen1*Vn_gen1)/Sb_gen1  # Impedance base
        Trq_b_gen1 = Sb_gen1/wmb_gen1  # Torque base
        Fb_gen1 = Trq_b_gen1/wmb_gen1  # Friction Factor base
        Lb_gen1 = Zb_gen1/wb_gen1  # Inductance base
        
            # Stator data in SI
        
        Rs_gen1 = Rs_pu_gen1*Zb_gen1
        Lls_gen1 = Lls_pu_gen1*Lb_gen1
        Lmd_gen1 = Lmd_pu_gen1*Lb_gen1
        Lmq_gen1 = Lmq_pu_gen1*Lb_gen1
        Rkd_gen1 = Rkd_pu_gen1*Zb_gen1
        Rkq_gen1 = Rkq_pu_gen1*Zb_gen1
        Llkd_gen1 = Llkd_pu_gen1*Lb_gen1
        Llkq_gen1 = Llkq_pu_gen1*Lb_gen1
        
            # Mechanical data in SI
        
        F_gen1 = Fpu_gen1*Fb_gen1 # Friction Factor in Nm.s;
        J_gen1 = 2*H_gen1*Sb_gen1/(wmb_gen1*wmb_gen1)  # Inertia in kg.m2
        
            # Field base calculation
        
        Lsfd_gen1 = (2.0/3.0)*Lmd_gen1*(1.0/Ns_fd_gen1)  # Mutual inductance between stator and field
        ifn_gen1 = Vb_gen1/(Lsfd_gen1*wb_gen1)  # Nominal field current
        ifb_gen1 = ifn_gen1*Lmd_pu_gen1  # Field current base
        Vfb_gen1 = Sb_gen1/ifb_gen1  # Field voltage base
        Zfb_gen1 = Vfb_gen1/ifb_gen1  # Field impedance base
        Lfb_gen1 = Zfb_gen1/wb_gen1  # Field inductance base
        
            # Field data in SI
        
        Rf_gen1 = Rf_pu_gen1*Zfb_gen1  # Field resistance (Field side)
        Llfd_gen1 = Llfd_pu_gen1*Lfb_gen1  # Field inductance (Field side)
        Rf_prime_gen1 = Rf_gen1*(3.0/2.0)*(Ns_fd_gen1*Ns_fd_gen1)  # Field resistance referred to the stator side
        Llfd_prime_gen1 = Llfd_gen1*(3.0/2.0)*(Ns_fd_gen1*Ns_fd_gen1)  # Field inductance referred to the stator side
        
            # Exciter initialization
        
        Tr_gen1 = 20e-4  # Low pass filter time constant
        Ka_gen1 = 200  # Regulator gain
        Ta_gen1 = 2e-3  # Regulator time constant
        Ke_gen1 = 1.0  # Exciter constant
        Te_gen1 = 1e-8 #Exciter time constant
        Tb_gen1 = 1e-12  # Transient gain reduction time constant b
        Tc_gen1 = 1e-12  # Transient gain reduction time constant c
        Kf_gen1 = 0  # Damping filter gain
        Tf_gen1 = 1e-12  # Damping filter time constant
        Efmin_gen1 = -0.1 # Regulator output lower limit
        Efmax_gen1 = 5.0 #5.0  # Regulator output upper limit
        Vt0_gen1 = 0.0  # Initial terminal voltage
        Vf0_gen1 = 0.0  # Initial field voltage
        Const_gen1 = Vf0_gen1/Ka_gen1
        
            #Diesel settings from Unit Test (Mach_ex_gov_PQv3_4MVA_unit_test_woodward_updated_started_v2.tse)
        
        # Governor specs
        
        K = 10/1.75 # gain K
        T4 = 0.025  # Time constant T4
        T5 = 0.0009  # Time constant T5
        T6 = 0.00574  # Time constant T6
        Pm0 = 0.0005  # Initial value of Mechanic Power
        Tmax = 1.1  # Max torque limit
        Tmin = 0  # Min torque limit
        Td = 0.024  # Engine time delay
        
        # numTF4d = [27.7777777777778,-27.6726170945921]  # For Ts = 1e-4
        # denTF4d = [1,-0.894839316814370]  # For Ts = 1e-4
        # numTF4d = [27.7777777777778,-27.6056562658610]  # For Ts = 1.7e-4
        # denTF4d = [1,-0.827878488083238]  # For Ts = 1.7e-4
        dummy = 1.0 + 2.0*T5/Ts
        coeff1 = (1.0 + 2.0*T4/Ts)/dummy
        coeff2 = (1.0 - 2.0*T4/Ts)/dummy
        coeff3 = 1.0
        coeff4 = (1.0 - 2.0*T5/Ts)/dummy
        numTF4d = [coeff1, coeff2] #[27.7777777777778,-27.4943090883516]  # For Ts = 3e-4
        denTF4d = [coeff3, coeff4] # [1,-0.716531310573789]  # For Ts = 3e-4
        
        # numTF3d = [0,0.0172707241189214]  # For Ts = 1e-4
        # denTF3d = [1,-0.982729275881079]  # For Ts = 1e-4
        # numTF3d = [0,0.0291824473977244]  # For Ts = 1.7e-4
        # denTF3d = [1,-0.970817552602276]  # For Ts = 1.7e-4
        dummy = 1.0 + 2.0*T6/Ts
        coeff1 = (1.0)/dummy
        coeff2 = (1.0)/dummy
        coeff3 = 1.0
        coeff4 = (1.0 - 2.0*T6/Ts)/dummy
        numTF3d = [coeff1, coeff2] #[0,0.0509224900975103]  # For Ts = 3e-4
        denTF3d = [coeff3, coeff4] # [1,-0.949077509902490]  # For Ts = 3e-4
        
        
        # Synchronous machine specs from Simulink's machine in PU
        
        f = 60.0  # Synchronous speed
        pms = 2.0  # Number of mechanical pole pairs
        Sb_gen2 = 4.0e6  # Nominal/base power of machine in VA
        Vn_gen2 = 13800.0  # Machine terminal line to line rms voltage
        Rs_pu_gen2 = 0.008979  # Stator resistance per phase in pu
        Lls_pu_gen2 = 0.05  # Stator leakage inductance in pu
        Lmd_pu_gen2 = 2.35  # Direct-axis magnetizing inductance in pu
        Lmq_pu_gen2 = 1.72  # Quadrature-axis magnetizing inductance in pu
        Rf_pu_gen2 = 0.00206  # Field resistance in pu
        Llfd_pu_gen2 = 0.511  # Field leakage inductance in pu
        Rkd_pu_gen2 = 0.2826  # D-axis resistance in pu
        Rkq_pu_gen2 = 0.02545  # Q-axis resistance in pu
        Llkd_pu_gen2 = 3.738  # D-axis leakage inductance in pu
        Llkq_pu_gen2 = 0.2392  # Q-axis leakage inductance in pu
        Ns_fd_gen2 = 1.0  # Turn ratio between the stator and the field windings
        Ns_kd_gen2 = 1.0  # Turn ratio between stator and d-axis damper windings
        Ns_kq_gen2 = 1.0  # Turn ratio between stator and q-axis damper windings
        H_gen2 = 0.3468*6.7  # Inertia coefficient in seconds
        Fpu_gen2 = 0.009238  # Friction factor in pu
        
        # Base calculation
        
        Vb_gen2 = Vn_gen2*((2.0/3.0)**0.5)  # Nominal/base voltage of machine terminal in V (Peak line to neutral voltage)
        wb_gen2 = 2.0*np.pi*f  # Electrical angular speed base
        wmb_gen2 = wb_gen2/pms  # Mechanical angular speed base
        Zb_gen2 = (Vn_gen2*Vn_gen2)/Sb_gen2  # Impedance base
        Trq_b_gen2 = Sb_gen2/wmb_gen2  # Torque base
        Fb_gen2 = Trq_b_gen2/wmb_gen2  # Friction Factor base
        Lb_gen2 = Zb_gen2/wb_gen2  # Inductance base
        
        # Stator data in SI
        
        Rs_gen2 = Rs_pu_gen2*Zb_gen2
        Lls_gen2 = Lls_pu_gen2*Lb_gen2
        Lmd_gen2 = Lmd_pu_gen2*Lb_gen2
        Lmq_gen2 = Lmq_pu_gen2*Lb_gen2
        Rkd_gen2 = Rkd_pu_gen2*Zb_gen2
        Rkq_gen2 = Rkq_pu_gen2*Zb_gen2
        Llkd_gen2 = Llkd_pu_gen2*Lb_gen2
        Llkq_gen2 = Llkq_pu_gen2*Lb_gen2
        
        # Mechanical data in SI
        
        F_gen2 = Fpu_gen2*Fb_gen2 # Friction Factor in Nm.s;
        J_gen2 = 2*H_gen2*Sb_gen2/(wmb_gen2*wmb_gen2)  # Inertia in kg.m2
        
        # Field base calculation
        
        Lsfd_gen2 = (2.0/3.0)*Lmd_gen2*(1.0/Ns_fd_gen2)  # Mutual inductance between stator and field
        ifn_gen2 = Vb_gen2/(Lsfd_gen2*wb_gen2)  # Nominal field current
        ifb_gen2 = ifn_gen2*Lmd_pu_gen2  # Field current base
        Vfb_gen2 = Sb_gen2/ifb_gen2  # Field voltage base
        Zfb_gen2 = Vfb_gen2/ifb_gen2  # Field impedance base
        Lfb_gen2 = Zfb_gen2/wb_gen2  # Field inductance base
        
        # Field data in SI
        
        Rf_gen2 = Rf_pu_gen2*Zfb_gen2  # Field resistance (Field side)
        Llfd_gen2 = Llfd_pu_gen2*Lfb_gen2  # Field inductance (Field side)
        Rf_prime_gen2 = Rf_gen2*(3.0/2.0)*(Ns_fd_gen2*Ns_fd_gen2)  # Field resistance referred to the stator side
        Llfd_prime_gen2 = Llfd_gen2*(3.0/2.0)*(Ns_fd_gen2*Ns_fd_gen2)  # Field inductance referred to the stator side
        
        # Exciter initialization
        
        Tr_gen2 = 1e-3  # Low pass filter time constant
        Ka_gen2 = 20.0  # Regulator gain
        Ta_gen2 = 2e-3  # Regulator time constant
        Ke_gen2 = 1.0  # Exciter constant
        Te_gen2 = 1e-3 #Exciter time constant
        Tb_gen2 = 0.0  # Transient gain reduction time constant b
        Tc_gen2 = 0.0  # Transient gain reduction time constant c
        Kf_gen2 = 0  # Damping filter gain
        Tf_gen2 = 1e-3  # Damping filter time constant
        Efmin_gen2 = -5.0 # 0.0 # Regulator output lower limit
        Efmax_gen2 = 5.0 #5.0  # Regulator output upper limit
        Vt0_gen2 = 0.0  # Initial terminal voltage
        Vf0_gen2 = 0.0  # Initial field voltage
        Const_gen2 = Vf0_gen2/Ka_gen2
        
        dummy_gain_exciter = 0.01
        
        #Rl = 14.283
        #Ll = 0.120472454546162
        
        Rl = 0.1
        Ll = 0.010
        
        Rl_mach = Rl
        Ll_mach = Ll
        
        Rl_shunt = 4761.0/1.0# 4761 Ohm is the resistance needed for 1% of nominal power at nominal voltage
        
        
        load = 0.196837209302326
    ENDCODE
}